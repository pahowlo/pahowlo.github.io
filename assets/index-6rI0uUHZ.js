(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const Qt=!1;var te=Array.isArray,Ie=Array.prototype.indexOf,Be=Array.from,Ct=Object.defineProperty,lt=Object.getOwnPropertyDescriptor,Fe=Object.getOwnPropertyDescriptors,Ne=Object.prototype,Oe=Array.prototype,ee=Object.getPrototypeOf,Lt=Object.isExtensible;function ze(t){return t()}function St(t){for(var e=0;e<t.length;e++)t[e]()}function Le(){var t,e,n=new Promise((i,s)=>{t=i,e=s});return{promise:n,resolve:t,reject:e}}const R=2,It=4,ne=8,bt=16,H=32,W=64,ie=128,C=256,pt=512,b=1024,P=2048,j=4096,J=8192,ct=16384,Bt=32768,qe=65536,qt=1<<17,He=1<<18,re=1<<19,Ft=1<<20,Pt=1<<21,se=1<<22,gt=1<<23,G=Symbol("$state"),oe=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function je(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ze(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ke(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ue(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ye(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function We(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ve(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function $e(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Ge=2,w=Symbol();function le(t){return t===this.v}function Xe(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Je(t){return!Xe(t,this.v)}let ht=!1,Qe=!1;function tn(){ht=!0}let y=null;function Ht(t){y=t}function ae(t,e=!1,n){y={p:y,c:null,e:null,s:t,x:null,l:ht&&!e?{s:null,u:null,$:[]}:null}}function fe(t){var e=y,n=e.e;if(n!==null){e.e=null;for(var i of n)be(i)}return y=e.p,{}}function Tt(){return!ht||y!==null&&y.l===null}const en=new WeakMap;function nn(t){var e=g;if(e===null)return p.f|=gt,t;if((e.f&Bt)===0){if((e.f&ie)===0)throw!e.parent&&t instanceof Error&&ce(t),t;e.b.error(t)}else ue(t,e)}function ue(t,e){for(;e!==null;){if((e.f&ie)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&ce(t),t}function ce(t){const e=en.get(t);e&&(Ct(t,"message",{value:e.message}),Ct(t,"stack",{value:e.stack}))}let _t=[];function rn(){var t=_t;_t=[],St(t)}function sn(t){_t.length===0&&queueMicrotask(rn),_t.push(t)}function on(t){var e=R|P,n=p!==null&&(p.f&R)!==0?p:null;return g===null||n!==null&&(n.f&C)!==0?e|=C:g.f|=re,{ctx:y,deps:null,effects:null,equals:le,f:e,fn:t,reactions:null,rv:0,v:w,wv:0,parent:n??g,ac:null}}function he(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Y(e[n])}}function ln(t){for(var e=t.parent;e!==null;){if((e.f&R)===0)return e;e=e.parent}return null}function Nt(t){var e,n=g;mt(ln(t));try{he(t),e=Me(t)}finally{mt(n)}return e}function de(t){var e=Nt(t);if(t.equals(e)||(t.v=e,t.wv=Se()),!rt)if(Q!==null)Q.set(t,t.v);else{var n=(q||(t.f&C)!==0)&&t.deps!==null?j:b;S(t,n)}}const st=new Set;let m=null,Q=null,jt=new Set,yt=[];function ve(){const t=yt.shift();yt.length>0&&queueMicrotask(ve),t()}let ft=[],Ot=null,Mt=!1;class tt{current=new Map;#r=new Map;#s=new Set;#t=0;#f=null;#u=!1;#n=[];#o=[];#i=[];#e=[];#l=[];#c=[];#h=[];skipped_effects=new Set;process(e){ft=[];var n=null;if(st.size>1){n=new Map,Q=new Map;for(const[r,o]of this.current)n.set(r,{v:r.v,wv:r.wv}),r.v=o;for(const r of st)if(r!==this)for(const[o,a]of r.#r)n.has(o)||(n.set(o,{v:o.v,wv:o.wv}),o.v=a)}for(const r of e)this.#v(r);if(this.#n.length===0&&this.#t===0){this.#d();var i=this.#i,s=this.#e;this.#i=[],this.#e=[],this.#l=[],m=null,Zt(i),Zt(s),m===null?m=this:st.delete(this),this.#f?.resolve()}else this.#a(this.#i),this.#a(this.#e),this.#a(this.#l);if(n){for(const[r,{v:o,wv:a}]of n)r.wv<=a&&(r.v=o);Q=null}for(const r of this.#n)at(r);for(const r of this.#o)at(r);this.#n=[],this.#o=[]}#v(e){e.f^=b;for(var n=e.first;n!==null;){var i=n.f,s=(i&(H|W))!==0,r=s&&(i&b)!==0,o=r||(i&J)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){if(s)n.f^=b;else if((i&b)===0)if((i&It)!==0)this.#e.push(n);else if((i&se)!==0){var a=n.b?.pending?this.#o:this.#n;a.push(n)}else Et(n)&&((n.f&bt)!==0&&this.#l.push(n),at(n));var l=n.first;if(l!==null){n=l;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}}#a(e){for(const n of e)((n.f&P)!==0?this.#c:this.#h).push(n),S(n,b);e.length=0}capture(e,n){this.#r.has(e)||this.#r.set(e,n),this.current.set(e,e.v)}activate(){m=this}deactivate(){m=null;for(const e of jt)if(jt.delete(e),e(),m!==null)break}neuter(){this.#u=!0}flush(){ft.length>0?an():this.#d(),m===this&&(this.#t===0&&st.delete(this),this.deactivate())}#d(){if(!this.#u)for(const e of this.#s)e();this.#s.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const e of this.#c)S(e,P),et(e);for(const e of this.#h)S(e,j),et(e);this.#i=[],this.#e=[],this.flush()}else this.deactivate()}add_callback(e){this.#s.add(e)}settled(){return(this.#f??=Le()).promise}static ensure(){if(m===null){const e=m=new tt;st.add(m),tt.enqueue(()=>{m===e&&e.flush()})}return m}static enqueue(e){yt.length===0&&queueMicrotask(ve),yt.unshift(e)}}function an(){var t=X;Mt=!0;try{var e=0;for(Ut(!0);ft.length>0;){var n=tt.ensure();if(e++>1e3){var i,s;fn()}n.process(ft),K.clear()}}finally{Mt=!1,Ut(t),Ot=null}}function fn(){try{Ye()}catch(t){ue(t,Ot)}}function Zt(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var i=t[n++];if((i.f&(ct|J))===0&&Et(i)){var s=m?m.current.size:0;if(at(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?Re(i):i.fn=null),m!==null&&m.current.size>s&&(i.f&Ft)!==0)break}}for(;n<e;)et(t[n++])}}function et(t){for(var e=Ot=t;e.parent!==null;){e=e.parent;var n=e.f;if(Mt&&e===g&&(n&bt)!==0)return;if((n&(W|H))!==0){if((n&b)===0)return;e.f^=b}}ft.push(e)}const K=new Map;function pe(t,e){var n={f:0,v:t,reactions:null,equals:le,rv:0,wv:0};return n}function O(t,e){const n=pe(t);return kn(n),n}function un(t,e=!1,n=!0){const i=pe(t);return e||(i.equals=Je),ht&&n&&y!==null&&y.l!==null&&(y.l.s??=[]).push(i),i}function L(t,e,n=!1){p!==null&&(!B||(p.f&qt)!==0)&&Tt()&&(p.f&(R|bt|se|qt))!==0&&!N?.includes(t)&&$e();let i=n?ot(e):e;return cn(t,i)}function cn(t,e){if(!t.equals(e)){var n=t.v;rt?K.set(t,e):K.set(t,n),t.v=e;var i=tt.ensure();i.capture(t,n),(t.f&R)!==0&&((t.f&P)!==0&&Nt(t),S(t,(t.f&C)===0?b:j)),t.wv=Se(),ge(t,P),Tt()&&g!==null&&(g.f&b)!==0&&(g.f&(H|W))===0&&(k===null?Cn([t]):k.push(t))}return e}function Rt(t){L(t,t.v+1)}function ge(t,e){var n=t.reactions;if(n!==null)for(var i=Tt(),s=n.length,r=0;r<s;r++){var o=n[r],a=o.f;if(!(!i&&o===g)){var l=(a&P)===0;l&&S(o,e),(a&R)!==0?ge(o,j):l&&et(o)}}}function ot(t){if(typeof t!="object"||t===null||G in t)return t;const e=ee(t);if(e!==Ne&&e!==Oe)return t;var n=new Map,i=te(t),s=O(0),r=U,o=a=>{if(U===r)return a();var l=p,f=U;nt(null),Wt(r);var c=a();return nt(l),Wt(f),c};return i&&n.set("length",O(t.length)),new Proxy(t,{defineProperty(a,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&We();var c=n.get(l);return c===void 0?c=o(()=>{var h=O(f.value);return n.set(l,h),h}):L(c,f.value,!0),!0},deleteProperty(a,l){var f=n.get(l);if(f===void 0){if(l in a){const c=o(()=>O(w));n.set(l,c),Rt(s)}}else L(f,w),Rt(s);return!0},get(a,l,f){if(l===G)return t;var c=n.get(l),h=l in a;if(c===void 0&&(!h||lt(a,l)?.writable)&&(c=o(()=>{var d=ot(h?a[l]:w),v=O(d);return v}),n.set(l,c)),c!==void 0){var u=F(c);return u===w?void 0:u}return Reflect.get(a,l,f)},getOwnPropertyDescriptor(a,l){var f=Reflect.getOwnPropertyDescriptor(a,l);if(f&&"value"in f){var c=n.get(l);c&&(f.value=F(c))}else if(f===void 0){var h=n.get(l),u=h?.v;if(h!==void 0&&u!==w)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return f},has(a,l){if(l===G)return!0;var f=n.get(l),c=f!==void 0&&f.v!==w||Reflect.has(a,l);if(f!==void 0||g!==null&&(!c||lt(a,l)?.writable)){f===void 0&&(f=o(()=>{var u=c?ot(a[l]):w,d=O(u);return d}),n.set(l,f));var h=F(f);if(h===w)return!1}return c},set(a,l,f,c){var h=n.get(l),u=l in a;if(i&&l==="length")for(var d=f;d<h.v;d+=1){var v=n.get(d+"");v!==void 0?L(v,w):d in a&&(v=o(()=>O(w)),n.set(d+"",v))}if(h===void 0)(!u||lt(a,l)?.writable)&&(h=o(()=>O(void 0)),L(h,ot(f)),n.set(l,h));else{u=h.v!==w;var _=o(()=>ot(f));L(h,_)}var M=Reflect.getOwnPropertyDescriptor(a,l);if(M?.set&&M.set.call(c,f),!u){if(i&&typeof l=="string"){var V=n.get("length"),D=Number(l);Number.isInteger(D)&&D>=V.v&&L(V,D+1)}Rt(s)}return!0},ownKeys(a){F(s);var l=Reflect.ownKeys(a).filter(h=>{var u=n.get(h);return u===void 0||u.v!==w});for(var[f,c]of n)c.v!==w&&!(f in a)&&l.push(f);return l},setPrototypeOf(){Ve()}})}var Kt,_e,ye,me;function hn(){if(Kt===void 0){Kt=window,_e=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;ye=lt(e,"firstChild").get,me=lt(e,"nextSibling").get,Lt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Lt(n)&&(n.__t=void 0)}}function dn(t=""){return document.createTextNode(t)}function we(t){return ye.call(t)}function vn(t){return me.call(t)}function pn(t,e){return we(t)}function xe(t){g===null&&p===null&&Ue(),p!==null&&(p.f&C)!==0&&g===null&&Ke(),rt&&Ze()}function gn(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function it(t,e,n,i=!0){var s=g;s!==null&&(s.f&J)!==0&&(t|=J);var r={ctx:y,deps:null,nodes_start:null,nodes_end:null,f:t|P,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{at(r),r.f|=Bt}catch(l){throw Y(r),l}else e!==null&&et(r);var o=n&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&re)===0;if(!o&&i&&(s!==null&&gn(r,s),p!==null&&(p.f&R)!==0&&(t&W)===0)){var a=p;(a.effects??=[]).push(r)}return r}function Dt(t){xe();var e=g.f,n=!p&&(e&H)!==0&&(e&Bt)===0;if(n){var i=y;(i.e??=[]).push(t)}else return be(t)}function be(t){return it(It|Ft,t,!1)}function _n(t){return xe(),it(ne|Ft,t,!0)}function yn(t){tt.ensure();const e=it(W,t,!0);return(n={})=>new Promise(i=>{n.outro?En(e,()=>{Y(e),i(void 0)}):(Y(e),i(void 0))})}function mn(t){return it(It,t,!1)}function wn(t,e=0){return it(ne|e,t,!0)}function xn(t,e=!0){return it(H,t,!0,e)}function Te(t){var e=t.teardown;if(e!==null){const n=rt,i=p;Yt(!0),nt(null);try{e.call(null)}finally{Yt(n),nt(i)}}}function Ee(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){n.ac?.abort(oe);var i=n.next;(n.f&W)!==0?n.parent=null:Y(n,e),n=i}}function bn(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&H)===0&&Y(e),e=n}}function Y(t,e=!0){var n=!1;(e||(t.f&He)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Tn(t.nodes_start,t.nodes_end),n=!0),Ee(t,e&&!n),wt(t,0),S(t,ct);var i=t.transitions;if(i!==null)for(const r of i)r.stop();Te(t);var s=t.parent;s!==null&&s.first!==null&&Re(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Tn(t,e){for(;t!==null;){var n=t===e?null:vn(t);t.remove(),t=n}}function Re(t){var e=t.parent,n=t.prev,i=t.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=n))}function En(t,e){var n=[];ke(t,n,!0),Rn(n,()=>{Y(t),e&&e()})}function Rn(t,e){var n=t.length;if(n>0){var i=()=>--n||e();for(var s of t)s.out(i)}else e()}function ke(t,e,n){if((t.f&J)===0){if(t.f^=J,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var i=t.first;i!==null;){var s=i.next,r=(i.f&qe)!==0||(i.f&H)!==0;ke(i,e,r?n:!1),i=s}}}let X=!1;function Ut(t){X=t}let rt=!1;function Yt(t){rt=t}let p=null,B=!1;function nt(t){p=t}let g=null;function mt(t){g=t}let N=null;function kn(t){p!==null&&(N===null?N=[t]:N.push(t))}let x=null,T=0,k=null;function Cn(t){k=t}let Ce=1,ut=0,U=ut;function Wt(t){U=t}let q=!1;function Se(){return++Ce}function Et(t){var e=t.f;if((e&P)!==0)return!0;if((e&j)!==0){var n=t.deps,i=(e&C)!==0;if(n!==null){var s,r,o=(e&pt)!==0,a=i&&g!==null&&!q,l=n.length;if((o||a)&&(g===null||(g.f&ct)===0)){var f=t,c=f.parent;for(s=0;s<l;s++)r=n[s],(o||!r?.reactions?.includes(f))&&(r.reactions??=[]).push(f);o&&(f.f^=pt),a&&c!==null&&(c.f&C)===0&&(f.f^=C)}for(s=0;s<l;s++)if(r=n[s],Et(r)&&de(r),r.wv>t.wv)return!0}(!i||g!==null&&!q)&&S(t,b)}return!1}function Pe(t,e,n=!0){var i=t.reactions;if(i!==null&&!N?.includes(t))for(var s=0;s<i.length;s++){var r=i[s];(r.f&R)!==0?Pe(r,e,!1):e===r&&(n?S(r,P):(r.f&b)!==0&&S(r,j),et(r))}}function Me(t){var e=x,n=T,i=k,s=p,r=q,o=N,a=y,l=B,f=U,c=t.f;x=null,T=0,k=null,q=(c&C)!==0&&(B||!X||p===null),p=(c&(H|W))===0?t:null,N=null,Ht(t.ctx),B=!1,U=++ut,t.ac!==null&&(t.ac.abort(oe),t.ac=null);try{t.f|=Pt;var h=(0,t.fn)(),u=t.deps;if(x!==null){var d;if(wt(t,T),u!==null&&T>0)for(u.length=T+x.length,d=0;d<x.length;d++)u[T+d]=x[d];else t.deps=u=x;if(!q||(c&R)!==0&&t.reactions!==null)for(d=T;d<u.length;d++)(u[d].reactions??=[]).push(t)}else u!==null&&T<u.length&&(wt(t,T),u.length=T);if(Tt()&&k!==null&&!B&&u!==null&&(t.f&(R|j|P))===0)for(d=0;d<k.length;d++)Pe(k[d],t);return s!==null&&s!==t&&(ut++,k!==null&&(i===null?i=k:i.push(...k))),(t.f&gt)!==0&&(t.f^=gt),h}catch(v){return nn(v)}finally{t.f^=Pt,x=e,T=n,k=i,p=s,q=r,N=o,Ht(a),B=l,U=f}}function Sn(t,e){let n=e.reactions;if(n!==null){var i=Ie.call(n,t);if(i!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[i]=n[s],n.pop())}}n===null&&(e.f&R)!==0&&(x===null||!x.includes(e))&&(S(e,j),(e.f&(C|pt))===0&&(e.f^=pt),he(e),wt(e,0))}function wt(t,e){var n=t.deps;if(n!==null)for(var i=e;i<n.length;i++)Sn(t,n[i])}function at(t){var e=t.f;if((e&ct)===0){S(t,b);var n=g,i=X;g=t,X=!0;try{(e&bt)!==0?bn(t):Ee(t),Te(t);var s=Me(t);t.teardown=typeof s=="function"?s:null,t.wv=Ce;var r;Qt&&Qe&&(t.f&P)!==0&&t.deps}finally{X=i,g=n}}}function F(t){var e=t.f,n=(e&R)!==0;if(p!==null&&!B){var i=g!==null&&(g.f&ct)!==0;if(!i&&!N?.includes(t)){var s=p.deps;if((p.f&Pt)!==0)t.rv<ut&&(t.rv=ut,x===null&&s!==null&&s[T]===t?T++:x===null?x=[t]:(!q||!x.includes(t))&&x.push(t));else{(p.deps??=[]).push(t);var r=t.reactions;r===null?t.reactions=[p]:r.includes(p)||r.push(p)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,a=o.parent;a!==null&&(a.f&C)===0&&(o.f^=C)}if(rt){if(K.has(t))return K.get(t);if(n){o=t;var l=o.v;return((o.f&b)===0&&o.reactions!==null||De(o))&&(l=Nt(o)),K.set(o,l),l}}else if(n){if(o=t,Q?.has(o))return Q.get(o);Et(o)&&de(o)}if((t.f&gt)!==0)throw t.v;return t.v}function De(t){if(t.v===w)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(K.has(e)||(e.f&R)!==0&&De(e))return!0;return!1}function zt(t){var e=B;try{return B=!0,t()}finally{B=e}}const Pn=-7169;function S(t,e){t.f=t.f&Pn|e}function Mn(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(G in t)At(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&G in n&&At(n)}}}function At(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{At(t[i],e)}catch{}const n=ee(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Fe(n);for(let s in i){const r=i[s].get;if(r)try{r.call(t)}catch{}}}}}const Dn=["touchstart","touchmove"];function An(t){return Dn.includes(t)}const In=new Set,Vt=new Set;function dt(t){var e=this,n=e.ownerDocument,i=t.type,s=t.composedPath?.()||[],r=s[0]||t.target,o=0,a=t.__root;if(a){var l=s.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var f=s.indexOf(e);if(f===-1)return;l<=f&&(o=l)}if(r=s[o]||t.target,r!==e){Ct(t,"currentTarget",{configurable:!0,get(){return r||n}});var c=p,h=g;nt(null),mt(null);try{for(var u,d=[];r!==null;){var v=r.assignedSlot||r.parentNode||r.host||null;try{var _=r["__"+i];if(_!=null&&(!r.disabled||t.target===r))if(te(_)){var[M,...V]=_;M.apply(r,[t,...V])}else _.call(r,t)}catch(D){u?d.push(D):u=D}if(t.cancelBubble||v===e||v===null)break;r=v}if(u){for(let D of d)queueMicrotask(()=>{throw D});throw u}}finally{t.__root=e,delete t.currentTarget,nt(c),mt(h)}}}function Bn(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Fn(t,e){var n=g;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Nn(t,e){var n=(e&Ge)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=Bn(s?t:"<!>"+t),i=we(i));var r=n||_e?document.importNode(i,!0):i.cloneNode(!0);return Fn(r,r),r}}function On(t,e){t!==null&&t.before(e)}function zn(t,e){return Ln(t,e)}const $=new Map;function Ln(t,{target:e,anchor:n,props:i={},events:s,context:r,intro:o=!0}){hn();var a=new Set,l=h=>{for(var u=0;u<h.length;u++){var d=h[u];if(!a.has(d)){a.add(d);var v=An(d);e.addEventListener(d,dt,{passive:v});var _=$.get(d);_===void 0?(document.addEventListener(d,dt,{passive:v}),$.set(d,1)):$.set(d,_+1)}}};l(Be(In)),Vt.add(l);var f=void 0,c=yn(()=>{var h=n??e.appendChild(dn());return xn(()=>{if(r){ae({});var u=y;u.c=r}s&&(i.$$events=s),f=t(h,i)||{},r&&fe()}),()=>{for(var u of a){e.removeEventListener(u,dt);var d=$.get(u);--d===0?(document.removeEventListener(u,dt),$.delete(u)):$.set(u,d)}Vt.delete(l),h!==n&&h.parentNode?.removeChild(h)}});return qn.set(f,c),f}let qn=new WeakMap;function $t(t,e){return t===e||t?.[G]===e}function Hn(t={},e,n,i){return mn(()=>{var s,r;return wn(()=>{s=r,r=[],zt(()=>{t!==n(...r)&&(e(t,...r),s&&$t(n(...s),t)&&e(null,...s))})}),()=>{sn(()=>{r&&$t(n(...r),t)&&e(null,...r)})}}),t}function jn(t=!1){const e=y,n=e.l.u;if(!n)return;let i=()=>Mn(e.s);if(t){let s=0,r={};const o=on(()=>{let a=!1;const l=e.s;for(const f in l)l[f]!==r[f]&&(r[f]=l[f],a=!0);return a&&s++,s});i=()=>F(o)}n.b.length&&_n(()=>{Gt(e,i),St(n.b)}),Dt(()=>{const s=zt(()=>n.m.map(ze));return()=>{for(const r of s)typeof r=="function"&&r()}}),n.a.length&&Dt(()=>{Gt(e,i),St(n.a)})}function Gt(t,e){if(t.l.s)for(const n of t.l.s)F(n);e()}function Zn(t){y===null&&je(),ht&&y.l!==null?Kn(y).m.push(t):Dt(()=>{const e=zt(t);if(typeof e=="function")return e})}function Kn(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Un="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Un);tn();var xt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function E(){var t=new xt(3);return xt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xt(t){var e=new xt(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function vt(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function Z(t,e,n){var i=new xt(3);return i[0]=t,i[1]=e,i[2]=n,i}function Ae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function A(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function kt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function z(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function I(t,e){var n=e[0],i=e[1],s=e[2],r=n*n+i*i+s*s;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Yn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Wn(t,e,n,i){var s=e[0],r=e[1],o=e[2];return t[0]=s+i*(n[0]-s),t[1]=r+i*(n[1]-r),t[2]=o+i*(n[2]-o),t}function Vn(t,e){var n=t[0],i=t[1],s=t[2],r=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+i*i+s*s),f=Math.sqrt(r*r+o*o+a*a),c=l*f,h=c&&Yn(t,e)/c;return Math.acos(Math.min(Math.max(h,-1),1))}(function(){var t=E();return function(e,n,i,s,r,o){var a,l;for(n||(n=3),i||(i=0),s?l=Math.min(s*n+i,e.length):l=e.length,a=i;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],r(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();function $n(t,e){if(e.length<3)return!1;let n=!1;const i=t[0],s=t[1];for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r][0],l=e[r][1],f=e[o][0],c=e[o][1];l<=s==s<c&&i<(f-a)*(s-l)/(c-l)+a&&(n=!n)}return n}class Jt{start;end;width;height;constructor(e,n,i,s){this.start={x:e,y:n},this.end={x:e+i,y:n+s},this.width=i,this.height=s}equals(e){return this.start.x===e.start.x&&this.start.y===e.start.y&&this.width===e.width&&this.height===e.height}}class Gn{canvasBox;maxDepth;polygon;centroids;constructor(e,n,i=.1){this.canvasBox=e,this.maxDepth=n;const s=n/2,r=Math.min(e.width*i,e.height*i);this.polygon=[Z(e.start.x+r,e.start.y+r,s),Z(e.end.x-r,e.start.y+r,s),Z(e.end.x-r,e.end.y-r,s),Z(e.start.x+r,e.end.y-r,s)],this.centroids=[]}isOutside(e){const n=e[2];return n>this.maxDepth||n<0||!$n(e,this.polygon)}resize(e){if(this.canvasBox.equals(e))return;const n=e.width===this.canvasBox.width?1:e.width/this.canvasBox.width,i=e.height===this.canvasBox.height?1:e.height/this.canvasBox.height;for(const s of this.polygon)s[0]=(s[0]-this.canvasBox.start.x)*n+e.start.x,s[1]=(s[1]-this.canvasBox.start.y)*i+e.start.y;for(const s of this.centroids)s[0]=(s[0]-this.canvasBox.start.x)*n+e.start.x,s[1]=(s[1]-this.canvasBox.start.y)*i+e.start.y;this.canvasBox=e}}const Xn={clearCanvasIfResized:!0,boids:{lineWidth:.1,size:3},debug:{flightZoneColor:"#00ff00"}};function Jn(){const t=new Path2D,e=1;return t.moveTo(-e*.5,e*.3),t.lineTo(e,0),t.lineTo(-e*.5,-e*.3),t.moveTo(-e*.5,e*.3),t.lineTo(-e*.5,-e*.3),t.moveTo(e,0),t.lineTo(-e*.5,0),t}class Qn{window;canvas;renderingContext;config;screenBox;canvasBox;maxHeight;devicePixelRatio;screenHasTopLeft=!1;boidPath=Jn();constructor(e,n,i={}){this.window=e,this.canvas=n;const s=n.getContext("2d");if(!s)throw new Error("Canvas context not available");this.renderingContext=s,this.config={...Xn,...i},this.screenBox=this.getScreenBox(),this.canvasBox=this.getCanvasBox(),this.devicePixelRatio=this.window.devicePixelRatio||1,this.maxHeight=this.getMaxHeight(),this.scaleCanvas()}getMaxHeight(){return this.screenHasTopLeft?this.screenBox.end.y-20:Math.max(this.canvasBox.end.y,this.screenBox.end.y)-20}checkResize(){this.screenBox=this.getScreenBox();const e=this.window.devicePixelRatio||1,n=this.getCanvasBox();return this.canvasBox.equals(n)&&this.devicePixelRatio===e?!1:(this.config.clearCanvasIfResized&&this.clearCanvas(),this.devicePixelRatio=e,this.canvasBox=n,this.maxHeight=this.getMaxHeight(),this.scaleCanvas(),!0)}getScreenBox(){let e=0,n=0;return"left"in this.window.screen&&"top"in this.window.screen&&typeof this.window.screen.left=="number"&&typeof this.window.screen.top=="number"?(this.screenHasTopLeft=!0,e=this.window.screen.left,n=this.window.screen.top):this.screenHasTopLeft=!1,new Jt(e,n,this.window.screen.width,this.window.screen.height)}getCanvasBox(){const e=this.canvas.getBoundingClientRect();return new Jt(this.window.screenX+(this.window.outerWidth-this.window.innerWidth)+e.left,this.window.screenY+(this.window.outerHeight-this.window.innerHeight)+e.top,e.width,e.height)}scaleCanvas(){const e=this.renderingContext,n=this.canvas.clientWidth,i=this.canvas.clientHeight;this.canvas.width=n*this.devicePixelRatio,this.canvas.height=i*this.devicePixelRatio,e.scale(this.devicePixelRatio,this.devicePixelRatio)}clearCanvas(){const e=this.renderingContext;e.canvas.width=e.canvas.width,e.scale(this.devicePixelRatio,this.devicePixelRatio)}drawFlightZone(e){const n=this.canvasBox.start.x,i=this.canvasBox.start.y,s=this.renderingContext;s.save(),s.strokeStyle=this.config.debug.flightZoneColor,s.lineWidth=2,s.beginPath(),s.moveTo(e.polygon[0][0]-n,e.polygon[0][1]-i);for(let r=1;r<e.polygon.length;r++)s.lineTo(e.polygon[r][0]-n,e.polygon[r][1]-i);s.closePath(),s.stroke(),s.fillStyle=this.config.debug.flightZoneColor,s.beginPath();for(const r of e.centroids)s.arc(r[0]-n,r[1]-i,2,0,2*Math.PI);s.fill(),s.closePath(),s.restore()}drawBoid(e,n){const i=e.getPosition(),s=e.getVelocity(),r=this.canvasBox.start.x,o=this.canvasBox.start.y,a=Math.min(1.125,Math.max(-.125,i[2]/n));let l=this.config.boids.size;a<0?l+=-a*8:a>1&&(l-=(a-1)*8);const f=this.renderingContext;f.save(),f.translate(i[0]-r,i[1]-o),f.rotate(Math.atan2(s[1],s[0])),f.scale(l,l),f.strokeStyle=`hsl(10, 10%, ${Math.max(10,90-a*80)}%)`,f.lineWidth=this.config.boids.lineWidth,f.stroke(this.boidPath),f.restore()}}class ti{cellSize;grid;prevCellKeys=new Map;constructor(e){this.cellSize=Z(e.x,e.y,0),this.grid=new Map}getCellKey(e){return`${Math.floor(e[0]/this.cellSize[0])},${Math.floor(e[1]/this.cellSize[1])}`}update(e){const n=e.getPosition(),i=this.getCellKey(n),s=this.prevCellKeys.get(e);if(s===i)return;if(s){const o=this.grid.get(s);if(o){const a=o.indexOf(e);a!==-1&&(o.length==1?this.grid.delete(s):(o[a]=o[o.length-1],o.pop()))}}const r=this.grid.get(i);r?r.push(e):this.grid.set(i,[e]),this.prevCellKeys.set(e,i)}getNeighbors(e,n,i=1e3){const s=this.getCellKey(e.getPosition()),r=[];let o=0;const a=this.grid.get(s);if(a){for(const c of a)if(c!==e&&(r.push(c),o++,o>=i))return r}const[l,f]=s.split(",").map(Number);for(let c=1;c<=n;c++)for(const{dx:h,dy:u}of this.diamondSpiralIterator(c)){const d=this.grid.get(`${l+h},${f+u}`);if(!d)continue;if(o+d.length>=i)return r.push(...d.slice(0,i-o)),r;r.push(...d),o+=d.length}return r}*diamondSpiralIterator(e){let n=e,i=0;for(yield{dx:n,dy:i};n>0;)n--,i++,yield{dx:n,dy:i};for(;n>-e;)n--,i--,yield{dx:n,dy:i};for(;n<0;)n++,i--,yield{dx:n,dy:i};for(;n<e;)n++,i++,yield{dx:n,dy:i}}}function ei(t,e,n,i){const s=I(E(),e),r=I(E(),n),o=i*Math.PI/180,a=Vn(s,r);if(a<=o){Ae(t,n);return}const l=(o+20)/a;Wn(t,s,r,l),I(t,t),z(t,t,vt(n))}const ni={minSpeed:1,maxSpeed:6,maxTurnAngleDeg:120,acceleration:{backToFlightZone:.6,pullUpTerrain:1,cohesion:.6,alignment:1,separation:1.2,gravity:.05}};class ii{displayId;position;velocity;acceleration;config;backToFlightZone;constructor(e,n,i={}){this.displayId=e,this.config={...i,...ni};const s=Math.random()*2*Math.PI;this.position=n,this.velocity=Z(Math.cos(s)*this.config.maxSpeed,Math.sin(s)*this.config.maxSpeed,0),this.acceleration=E()}getPosition(){return Xt(this.position)}getVelocity(){return Xt(this.velocity)}update(e,n,i,s,r,o,a){let l=this.config.maxTurnAngleDeg,f=this.config.maxSpeed,c=!1;const h=E();if(this.position[1]>=a&&(h[1]=-this.config.acceleration.pullUpTerrain,l+=20,f+=1,c=!0),!this.backToFlightZone&&s(this.position)){const v=E();for(const _ of o.length>0?o:r)A(v,v,kt(E(),_,this.position));I(v,v),this.backToFlightZone={direction:v,remainingTicks:20}}if(this.backToFlightZone&&this.backToFlightZone.remainingTicks>0){const v=Ae(E(),this.backToFlightZone.direction);I(v,v),z(v,v,this.config.acceleration.backToFlightZone),A(h,h,v),this.backToFlightZone.remainingTicks-=1,this.backToFlightZone.remainingTicks<=0&&(this.backToFlightZone=void 0)}if(!c){const v=E(),_=E();for(const M of e){const V=kt(E(),M.getPosition(),this.position);A(_,_,V);const D=M.getVelocity();A(v,v,D)}I(_,_),z(_,_,this.config.acceleration.cohesion),I(v,v),z(v,v,this.config.acceleration.alignment),A(h,h,_),A(h,h,v)}const u=E(),d=Math.max(i[0],i[1],i[2]);for(const v of n){const _=kt(E(),this.position,v.getPosition()),M=vt(_);M!==0&&(z(_,_,d/M),A(u,u,_))}I(u,u),z(u,u,this.config.acceleration.separation),A(h,h,u),ei(this.acceleration,this.velocity,h,l),this.acceleration[1]+=this.config.acceleration.gravity,A(this.velocity,this.velocity,this.acceleration),vt(this.velocity)>f?(I(this.velocity,this.velocity),z(this.velocity,this.velocity,f)):vt(this.velocity)<this.config.minSpeed&&(I(this.velocity,this.velocity),z(this.velocity,this.velocity,this.config.minSpeed)),this.position=A(this.position,this.position,this.velocity)}}const ri={maxDepth:250,grid:{neighborDistance:2,closeNeighborDistance:0,maxNeighborCount:20,cellSize:{x:10,y:10}}};class si{simBox;config;maxBoidCount=0;boidConfig={};boids=[];spatialGrid;isRunning=!1;nextDisplayId=0;constructor(e,n={}){this.simBox=e,this.config={...ri,...n},this.spatialGrid=new ti(this.config.grid.cellSize)}maxDepth(){return this.config.maxDepth}resize(e,n){this.simBox=e,n&&(this.config.maxDepth=n)}start(e,n){this.maxBoidCount=e,this.boidConfig=n;for(let i=0;i<this.maxBoidCount;i++){const s=Z(this.simBox.start.x+this.simBox.width*(Math.random()*1.4-.2),this.simBox.start.y+this.simBox.height*(Math.random()*1.2-.2)-20,Math.random()*this.config.maxDepth),r=new ii(this.nextDisplayId,s,this.boidConfig);this.nextDisplayId++,this.boids.push(r),this.spatialGrid.update(r)}this.isRunning=!0}update(e,n){if(this.isRunning)for(const i of this.boids){const s=this.spatialGrid.getNeighbors(i,this.config.grid.neighborDistance,this.config.grid.maxNeighborCount),r=this.spatialGrid.getNeighbors(i,this.config.grid.closeNeighborDistance,this.config.grid.maxNeighborCount);i.update(s,r,this.spatialGrid.cellSize,o=>e.isOutside(o),e.polygon,e.centroids,n),this.spatialGrid.update(i)}}stop(){this.isRunning=!1,this.boids=[],this.maxBoidCount=0}}class oi{renderer;flightZone;simulation;debug=!1;isRunning=!1;animationId=null;resizeTimeoutId=null;constructor(e,n,i={}){this.renderer=new Qn(e,n,i),this.simulation=new si(this.renderer.screenBox),this.flightZone=new Gn(this.renderer.canvasBox,this.simulation.maxDepth())}start(e,n,i={}){this.debug=n,this.simulation.maxBoidCount=e,this.simulation.boidConfig=i,!this.isRunning&&(this.isRunning=!0,this.simulation.start(e,i),this.animationLoop(),this.resizeLoop())}animationLoop=()=>{if(!this.isRunning)return;const e=this.renderer.maxHeight;this.simulation.update(this.flightZone,e),this.renderer.clearCanvas(),this.debug&&this.renderer.drawFlightZone(this.flightZone),this.simulation.boids.forEach(n=>{this.renderer.drawBoid(n,this.simulation.maxDepth())}),this.animationId=requestAnimationFrame(this.animationLoop)};resizeLoop=()=>{if(!this.isRunning)return;this.renderer.checkResize()&&(this.flightZone.resize(this.renderer.canvasBox),this.simulation.resize(this.renderer.screenBox)),this.resizeTimeoutId=setTimeout(this.resizeLoop,10)};stop(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.resizeTimeoutId&&(clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=null),this.renderer.clearCanvas(),this.simulation.stop(),this.isRunning=!1}}var li=Nn('<main class="svelte-uxr442"><canvas class="svelte-uxr442"></canvas></main>');function ai(t,e){ae(e,!1);let n,i=un(null),s=!1;Zn(()=>{n=new URLSearchParams(window.location.search),n.has("debug")&&(s=!0),F(i)&&new oi(window,F(i)).start(6e3,s,{})}),jn();var r=li(),o=pn(r);Hn(o,a=>L(i,a),()=>F(i)),On(t,r),fe()}zn(ai,{target:document.getElementById("app")});
