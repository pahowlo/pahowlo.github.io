(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const Qt=!1;var te=Array.isArray,Ne=Array.prototype.indexOf,Oe=Array.from,Ct=Object.defineProperty,it=Object.getOwnPropertyDescriptor,Be=Object.getOwnPropertyDescriptors,De=Object.prototype,ze=Array.prototype,ee=Object.getPrototypeOf,jt=Object.isExtensible;function Fe(t){return t()}function St(t){for(var e=0;e<t.length;e++)t[e]()}function je(){var t,e,n=new Promise((i,s)=>{t=i,e=s});return{promise:n,resolve:t,reject:e}}const E=2,Nt=4,ne=8,xt=16,F=32,Y=64,ie=128,R=256,vt=512,x=1024,S=2048,j=4096,H=8192,lt=16384,Ot=32768,Le=65536,Lt=1<<17,qe=1<<18,re=1<<19,Bt=1<<20,Pt=1<<21,se=1<<22,pt=1<<23,U=Symbol("$state"),oe=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ke(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function We(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ye(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $e(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ue(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ve(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function He(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ge(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Ze=2,w=Symbol();function le(t){return t===this.v}function Xe(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Je(t){return!Xe(t,this.v)}let at=!1,Qe=!1;function tn(){at=!0}let _=null;function qt(t){_=t}function ae(t,e=!1,n){_={p:_,c:null,e:null,s:t,x:null,l:at&&!e?{s:null,u:null,$:[]}:null}}function fe(t){var e=_,n=e.e;if(n!==null){e.e=null;for(var i of n)be(i)}return _=e.p,{}}function bt(){return!at||_!==null&&_.l===null}const en=new WeakMap;function nn(t){var e=p;if(e===null)return v.f|=pt,t;if((e.f&Ot)===0){if((e.f&ie)===0)throw!e.parent&&t instanceof Error&&ce(t),t;e.b.error(t)}else ue(t,e)}function ue(t,e){for(;e!==null;){if((e.f&ie)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&ce(t),t}function ce(t){const e=en.get(t);e&&(Ct(t,"message",{value:e.message}),Ct(t,"stack",{value:e.stack}))}let _t=[];function rn(){var t=_t;_t=[],St(t)}function sn(t){_t.length===0&&queueMicrotask(rn),_t.push(t)}function on(t){var e=E|S,n=v!==null&&(v.f&E)!==0?v:null;return p===null||n!==null&&(n.f&R)!==0?e|=R:p.f|=re,{ctx:_,deps:null,effects:null,equals:le,f:e,fn:t,reactions:null,rv:0,v:w,wv:0,parent:n??p,ac:null}}function he(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)W(e[n])}}function ln(t){for(var e=t.parent;e!==null;){if((e.f&E)===0)return e;e=e.parent}return null}function Dt(t){var e,n=p;yt(ln(t));try{he(t),e=Me(t)}finally{yt(n)}return e}function de(t){var e=Dt(t);if(t.equals(e)||(t.v=e,t.wv=Pe()),!tt)if(G!==null)G.set(t,t.v);else{var n=(z||(t.f&R)!==0)&&t.deps!==null?j:x;C(t,n)}}const et=new Set;let y=null,G=null,Kt=new Set,gt=[];function ve(){const t=gt.shift();gt.length>0&&queueMicrotask(ve),t()}let st=[],zt=null,kt=!1;class Z{current=new Map;#r=new Map;#s=new Set;#t=0;#f=null;#u=!1;#n=[];#o=[];#i=[];#e=[];#l=[];#c=[];#h=[];skipped_effects=new Set;process(e){st=[];var n=null;if(et.size>1){n=new Map,G=new Map;for(const[r,o]of this.current)n.set(r,{v:r.v,wv:r.wv}),r.v=o;for(const r of et)if(r!==this)for(const[o,l]of r.#r)n.has(o)||(n.set(o,{v:o.v,wv:o.wv}),o.v=l)}for(const r of e)this.#v(r);if(this.#n.length===0&&this.#t===0){this.#d();var i=this.#i,s=this.#e;this.#i=[],this.#e=[],this.#l=[],y=null,Wt(i),Wt(s),y===null?y=this:et.delete(this),this.#f?.resolve()}else this.#a(this.#i),this.#a(this.#e),this.#a(this.#l);if(n){for(const[r,{v:o,wv:l}]of n)r.wv<=l&&(r.v=o);G=null}for(const r of this.#n)rt(r);for(const r of this.#o)rt(r);this.#n=[],this.#o=[]}#v(e){e.f^=x;for(var n=e.first;n!==null;){var i=n.f,s=(i&(F|Y))!==0,r=s&&(i&x)!==0,o=r||(i&H)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){if(s)n.f^=x;else if((i&x)===0)if((i&Nt)!==0)this.#e.push(n);else if((i&se)!==0){var l=n.b?.pending?this.#o:this.#n;l.push(n)}else Et(n)&&((n.f&xt)!==0&&this.#l.push(n),rt(n));var a=n.first;if(a!==null){n=a;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}}#a(e){for(const n of e)((n.f&S)!==0?this.#c:this.#h).push(n),C(n,x);e.length=0}capture(e,n){this.#r.has(e)||this.#r.set(e,n),this.current.set(e,e.v)}activate(){y=this}deactivate(){y=null;for(const e of Kt)if(Kt.delete(e),e(),y!==null)break}neuter(){this.#u=!0}flush(){st.length>0?an():this.#d(),y===this&&(this.#t===0&&et.delete(this),this.deactivate())}#d(){if(!this.#u)for(const e of this.#s)e();this.#s.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const e of this.#c)C(e,S),X(e);for(const e of this.#h)C(e,j),X(e);this.#i=[],this.#e=[],this.flush()}else this.deactivate()}add_callback(e){this.#s.add(e)}settled(){return(this.#f??=je()).promise}static ensure(){if(y===null){const e=y=new Z;et.add(y),Z.enqueue(()=>{y===e&&e.flush()})}return y}static enqueue(e){gt.length===0&&queueMicrotask(ve),gt.unshift(e)}}function an(){var t=V;kt=!0;try{var e=0;for($t(!0);st.length>0;){var n=Z.ensure();if(e++>1e3){var i,s;fn()}n.process(st),q.clear()}}finally{kt=!1,$t(t),zt=null}}function fn(){try{Ue()}catch(t){ue(t,zt)}}function Wt(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var i=t[n++];if((i.f&(lt|H))===0&&Et(i)){var s=y?y.current.size:0;if(rt(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?Re(i):i.fn=null),y!==null&&y.current.size>s&&(i.f&Bt)!==0)break}}for(;n<e;)X(t[n++])}}function X(t){for(var e=zt=t;e.parent!==null;){e=e.parent;var n=e.f;if(kt&&e===p&&(n&xt)!==0)return;if((n&(Y|F))!==0){if((n&x)===0)return;e.f^=x}}st.push(e)}const q=new Map;function pe(t,e){var n={f:0,v:t,reactions:null,equals:le,rv:0,wv:0};return n}function O(t,e){const n=pe(t);return Cn(n),n}function un(t,e=!1,n=!0){const i=pe(t);return e||(i.equals=Je),at&&n&&_!==null&&_.l!==null&&(_.l.s??=[]).push(i),i}function B(t,e,n=!1){v!==null&&(!P||(v.f&Lt)!==0)&&bt()&&(v.f&(E|xt|se|Lt))!==0&&!A?.includes(t)&&Ge();let i=n?nt(e):e;return cn(t,i)}function cn(t,e){if(!t.equals(e)){var n=t.v;tt?q.set(t,e):q.set(t,n),t.v=e;var i=Z.ensure();i.capture(t,n),(t.f&E)!==0&&((t.f&S)!==0&&Dt(t),C(t,(t.f&R)===0?x:j)),t.wv=Pe(),_e(t,S),bt()&&p!==null&&(p.f&x)!==0&&(p.f&(F|Y))===0&&(T===null?Sn([t]):T.push(t))}return e}function Tt(t){B(t,t.v+1)}function _e(t,e){var n=t.reactions;if(n!==null)for(var i=bt(),s=n.length,r=0;r<s;r++){var o=n[r],l=o.f;if(!(!i&&o===p)){var a=(l&S)===0;a&&C(o,e),(l&E)!==0?_e(o,j):a&&X(o)}}}function nt(t){if(typeof t!="object"||t===null||U in t)return t;const e=ee(t);if(e!==De&&e!==ze)return t;var n=new Map,i=te(t),s=O(0),r=K,o=l=>{if(K===r)return l();var a=v,f=K;J(null),Vt(r);var u=l();return J(a),Vt(f),u};return i&&n.set("length",O(t.length)),new Proxy(t,{defineProperty(l,a,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Ve();var u=n.get(a);return u===void 0?u=o(()=>{var d=O(f.value);return n.set(a,d),d}):B(u,f.value,!0),!0},deleteProperty(l,a){var f=n.get(a);if(f===void 0){if(a in l){const u=o(()=>O(w));n.set(a,u),Tt(s)}}else B(f,w),Tt(s);return!0},get(l,a,f){if(a===U)return t;var u=n.get(a),d=a in l;if(u===void 0&&(!d||it(l,a)?.writable)&&(u=o(()=>{var h=nt(d?l[a]:w),g=O(h);return g}),n.set(a,u)),u!==void 0){var c=I(u);return c===w?void 0:c}return Reflect.get(l,a,f)},getOwnPropertyDescriptor(l,a){var f=Reflect.getOwnPropertyDescriptor(l,a);if(f&&"value"in f){var u=n.get(a);u&&(f.value=I(u))}else if(f===void 0){var d=n.get(a),c=d?.v;if(d!==void 0&&c!==w)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return f},has(l,a){if(a===U)return!0;var f=n.get(a),u=f!==void 0&&f.v!==w||Reflect.has(l,a);if(f!==void 0||p!==null&&(!u||it(l,a)?.writable)){f===void 0&&(f=o(()=>{var c=u?nt(l[a]):w,h=O(c);return h}),n.set(a,f));var d=I(f);if(d===w)return!1}return u},set(l,a,f,u){var d=n.get(a),c=a in l;if(i&&a==="length")for(var h=f;h<d.v;h+=1){var g=n.get(h+"");g!==void 0?B(g,w):h in l&&(g=o(()=>O(w)),n.set(h+"",g))}if(d===void 0)(!c||it(l,a)?.writable)&&(d=o(()=>O(void 0)),B(d,nt(f)),n.set(a,d));else{c=d.v!==w;var k=o(()=>nt(f));B(d,k)}var ft=Reflect.getOwnPropertyDescriptor(l,a);if(ft?.set&&ft.set.call(u,f),!c){if(i&&typeof a=="string"){var ut=n.get("length"),N=Number(a);Number.isInteger(N)&&N>=ut.v&&B(ut,N+1)}Tt(s)}return!0},ownKeys(l){I(s);var a=Reflect.ownKeys(l).filter(d=>{var c=n.get(d);return c===void 0||c.v!==w});for(var[f,u]of n)u.v!==w&&!(f in l)&&a.push(f);return a},setPrototypeOf(){He()}})}var Yt,ge,ye,we;function hn(){if(Yt===void 0){Yt=window,ge=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;ye=it(e,"firstChild").get,we=it(e,"nextSibling").get,jt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),jt(n)&&(n.__t=void 0)}}function dn(t=""){return document.createTextNode(t)}function me(t){return ye.call(t)}function vn(t){return we.call(t)}function pn(t,e){return me(t)}function xe(t){p===null&&v===null&&$e(),v!==null&&(v.f&R)!==0&&p===null&&Ye(),tt&&We()}function _n(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Q(t,e,n,i=!0){var s=p;s!==null&&(s.f&H)!==0&&(t|=H);var r={ctx:_,deps:null,nodes_start:null,nodes_end:null,f:t|S,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{rt(r),r.f|=Ot}catch(a){throw W(r),a}else e!==null&&X(r);var o=n&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&re)===0;if(!o&&i&&(s!==null&&_n(r,s),v!==null&&(v.f&E)!==0&&(t&Y)===0)){var l=v;(l.effects??=[]).push(r)}return r}function Mt(t){xe();var e=p.f,n=!v&&(e&F)!==0&&(e&Ot)===0;if(n){var i=_;(i.e??=[]).push(t)}else return be(t)}function be(t){return Q(Nt|Bt,t,!1)}function gn(t){return xe(),Q(ne|Bt,t,!0)}function yn(t){Z.ensure();const e=Q(Y,t,!0);return(n={})=>new Promise(i=>{n.outro?Tn(e,()=>{W(e),i(void 0)}):(W(e),i(void 0))})}function wn(t){return Q(Nt,t,!1)}function mn(t,e=0){return Q(ne|e,t,!0)}function xn(t,e=!0){return Q(F,t,!0,e)}function Ee(t){var e=t.teardown;if(e!==null){const n=tt,i=v;Ut(!0),J(null);try{e.call(null)}finally{Ut(n),J(i)}}}function Te(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){n.ac?.abort(oe);var i=n.next;(n.f&Y)!==0?n.parent=null:W(n,e),n=i}}function bn(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&F)===0&&W(e),e=n}}function W(t,e=!0){var n=!1;(e||(t.f&qe)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(En(t.nodes_start,t.nodes_end),n=!0),Te(t,e&&!n),wt(t,0),C(t,lt);var i=t.transitions;if(i!==null)for(const r of i)r.stop();Ee(t);var s=t.parent;s!==null&&s.first!==null&&Re(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function En(t,e){for(;t!==null;){var n=t===e?null:vn(t);t.remove(),t=n}}function Re(t){var e=t.parent,n=t.prev,i=t.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=n))}function Tn(t,e){var n=[];Ce(t,n,!0),Rn(n,()=>{W(t),e&&e()})}function Rn(t,e){var n=t.length;if(n>0){var i=()=>--n||e();for(var s of t)s.out(i)}else e()}function Ce(t,e,n){if((t.f&H)===0){if(t.f^=H,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var i=t.first;i!==null;){var s=i.next,r=(i.f&Le)!==0||(i.f&F)!==0;Ce(i,e,r?n:!1),i=s}}}let V=!1;function $t(t){V=t}let tt=!1;function Ut(t){tt=t}let v=null,P=!1;function J(t){v=t}let p=null;function yt(t){p=t}let A=null;function Cn(t){v!==null&&(A===null?A=[t]:A.push(t))}let m=null,b=0,T=null;function Sn(t){T=t}let Se=1,ot=0,K=ot;function Vt(t){K=t}let z=!1;function Pe(){return++Se}function Et(t){var e=t.f;if((e&S)!==0)return!0;if((e&j)!==0){var n=t.deps,i=(e&R)!==0;if(n!==null){var s,r,o=(e&vt)!==0,l=i&&p!==null&&!z,a=n.length;if((o||l)&&(p===null||(p.f&lt)===0)){var f=t,u=f.parent;for(s=0;s<a;s++)r=n[s],(o||!r?.reactions?.includes(f))&&(r.reactions??=[]).push(f);o&&(f.f^=vt),l&&u!==null&&(u.f&R)===0&&(f.f^=R)}for(s=0;s<a;s++)if(r=n[s],Et(r)&&de(r),r.wv>t.wv)return!0}(!i||p!==null&&!z)&&C(t,x)}return!1}function ke(t,e,n=!0){var i=t.reactions;if(i!==null&&!A?.includes(t))for(var s=0;s<i.length;s++){var r=i[s];(r.f&E)!==0?ke(r,e,!1):e===r&&(n?C(r,S):(r.f&x)!==0&&C(r,j),X(r))}}function Me(t){var e=m,n=b,i=T,s=v,r=z,o=A,l=_,a=P,f=K,u=t.f;m=null,b=0,T=null,z=(u&R)!==0&&(P||!V||v===null),v=(u&(F|Y))===0?t:null,A=null,qt(t.ctx),P=!1,K=++ot,t.ac!==null&&(t.ac.abort(oe),t.ac=null);try{t.f|=Pt;var d=(0,t.fn)(),c=t.deps;if(m!==null){var h;if(wt(t,b),c!==null&&b>0)for(c.length=b+m.length,h=0;h<m.length;h++)c[b+h]=m[h];else t.deps=c=m;if(!z||(u&E)!==0&&t.reactions!==null)for(h=b;h<c.length;h++)(c[h].reactions??=[]).push(t)}else c!==null&&b<c.length&&(wt(t,b),c.length=b);if(bt()&&T!==null&&!P&&c!==null&&(t.f&(E|j|S))===0)for(h=0;h<T.length;h++)ke(T[h],t);return s!==null&&s!==t&&(ot++,T!==null&&(i===null?i=T:i.push(...T))),(t.f&pt)!==0&&(t.f^=pt),d}catch(g){return nn(g)}finally{t.f^=Pt,m=e,b=n,T=i,v=s,z=r,A=o,qt(l),P=a,K=f}}function Pn(t,e){let n=e.reactions;if(n!==null){var i=Ne.call(n,t);if(i!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[i]=n[s],n.pop())}}n===null&&(e.f&E)!==0&&(m===null||!m.includes(e))&&(C(e,j),(e.f&(R|vt))===0&&(e.f^=vt),he(e),wt(e,0))}function wt(t,e){var n=t.deps;if(n!==null)for(var i=e;i<n.length;i++)Pn(t,n[i])}function rt(t){var e=t.f;if((e&lt)===0){C(t,x);var n=p,i=V;p=t,V=!0;try{(e&xt)!==0?bn(t):Te(t),Ee(t);var s=Me(t);t.teardown=typeof s=="function"?s:null,t.wv=Se;var r;Qt&&Qe&&(t.f&S)!==0&&t.deps}finally{V=i,p=n}}}function I(t){var e=t.f,n=(e&E)!==0;if(v!==null&&!P){var i=p!==null&&(p.f&lt)!==0;if(!i&&!A?.includes(t)){var s=v.deps;if((v.f&Pt)!==0)t.rv<ot&&(t.rv=ot,m===null&&s!==null&&s[b]===t?b++:m===null?m=[t]:(!z||!m.includes(t))&&m.push(t));else{(v.deps??=[]).push(t);var r=t.reactions;r===null?t.reactions=[v]:r.includes(v)||r.push(v)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,l=o.parent;l!==null&&(l.f&R)===0&&(o.f^=R)}if(tt){if(q.has(t))return q.get(t);if(n){o=t;var a=o.v;return((o.f&x)===0&&o.reactions!==null||Ie(o))&&(a=Dt(o)),q.set(o,a),a}}else if(n){if(o=t,G?.has(o))return G.get(o);Et(o)&&de(o)}if((t.f&pt)!==0)throw t.v;return t.v}function Ie(t){if(t.v===w)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(q.has(e)||(e.f&E)!==0&&Ie(e))return!0;return!1}function Ft(t){var e=P;try{return P=!0,t()}finally{P=e}}const kn=-7169;function C(t,e){t.f=t.f&kn|e}function Mn(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(U in t)It(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&U in n&&It(n)}}}function It(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{It(t[i],e)}catch{}const n=ee(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Be(n);for(let s in i){const r=i[s].get;if(r)try{r.call(t)}catch{}}}}}const In=["touchstart","touchmove"];function An(t){return In.includes(t)}const Nn=new Set,Ht=new Set;function ct(t){var e=this,n=e.ownerDocument,i=t.type,s=t.composedPath?.()||[],r=s[0]||t.target,o=0,l=t.__root;if(l){var a=s.indexOf(l);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var f=s.indexOf(e);if(f===-1)return;a<=f&&(o=a)}if(r=s[o]||t.target,r!==e){Ct(t,"currentTarget",{configurable:!0,get(){return r||n}});var u=v,d=p;J(null),yt(null);try{for(var c,h=[];r!==null;){var g=r.assignedSlot||r.parentNode||r.host||null;try{var k=r["__"+i];if(k!=null&&(!r.disabled||t.target===r))if(te(k)){var[ft,...ut]=k;ft.apply(r,[t,...ut])}else k.call(r,t)}catch(N){c?h.push(N):c=N}if(t.cancelBubble||g===e||g===null)break;r=g}if(c){for(let N of h)queueMicrotask(()=>{throw N});throw c}}finally{t.__root=e,delete t.currentTarget,J(u),yt(d)}}}function On(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Bn(t,e){var n=p;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Dn(t,e){var n=(e&Ze)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=On(s?t:"<!>"+t),i=me(i));var r=n||ge?document.importNode(i,!0):i.cloneNode(!0);return Bn(r,r),r}}function zn(t,e){t!==null&&t.before(e)}function Fn(t,e){return jn(t,e)}const $=new Map;function jn(t,{target:e,anchor:n,props:i={},events:s,context:r,intro:o=!0}){hn();var l=new Set,a=d=>{for(var c=0;c<d.length;c++){var h=d[c];if(!l.has(h)){l.add(h);var g=An(h);e.addEventListener(h,ct,{passive:g});var k=$.get(h);k===void 0?(document.addEventListener(h,ct,{passive:g}),$.set(h,1)):$.set(h,k+1)}}};a(Oe(Nn)),Ht.add(a);var f=void 0,u=yn(()=>{var d=n??e.appendChild(dn());return xn(()=>{if(r){ae({});var c=_;c.c=r}s&&(i.$$events=s),f=t(d,i)||{},r&&fe()}),()=>{for(var c of l){e.removeEventListener(c,ct);var h=$.get(c);--h===0?(document.removeEventListener(c,ct),$.delete(c)):$.set(c,h)}Ht.delete(a),d!==n&&d.parentNode?.removeChild(d)}});return Ln.set(f,u),f}let Ln=new WeakMap;function Gt(t,e){return t===e||t?.[U]===e}function qn(t={},e,n,i){return wn(()=>{var s,r;return mn(()=>{s=r,r=[],Ft(()=>{t!==n(...r)&&(e(t,...r),s&&Gt(n(...s),t)&&e(null,...s))})}),()=>{sn(()=>{r&&Gt(n(...r),t)&&e(null,...r)})}}),t}function Kn(t=!1){const e=_,n=e.l.u;if(!n)return;let i=()=>Mn(e.s);if(t){let s=0,r={};const o=on(()=>{let l=!1;const a=e.s;for(const f in a)a[f]!==r[f]&&(r[f]=a[f],l=!0);return l&&s++,s});i=()=>I(o)}n.b.length&&gn(()=>{Zt(e,i),St(n.b)}),Mt(()=>{const s=Ft(()=>n.m.map(Fe));return()=>{for(const r of s)typeof r=="function"&&r()}}),n.a.length&&Mt(()=>{Zt(e,i),St(n.a)})}function Zt(t,e){if(t.l.s)for(const n of t.l.s)I(n);e()}function Wn(t){_===null&&Ke(),at&&_.l!==null?Yn(_).m.push(t):Mt(()=>{const e=Ft(t);if(typeof e=="function")return e})}function Yn(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const $n="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add($n);tn();var mt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function M(){var t=new mt(3);return mt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xt(t){var e=new mt(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function At(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function D(t,e,n){var i=new mt(3);return i[0]=t,i[1]=e,i[2]=n,i}function Ae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Un(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function Rt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Vn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function dt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function L(t,e){var n=e[0],i=e[1],s=e[2],r=n*n+i*i+s*s;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Hn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}(function(){var t=M();return function(e,n,i,s,r,o){var l,a;for(n||(n=3),i||(i=0),s?a=Math.min(s*n+i,e.length):a=e.length,l=i;l<a;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],r(t,t,o),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();class ht{start;end;width;height;constructor(e,n,i,s){this.start={x:e,y:n},this.end={x:e+i,y:n+s},this.width=i,this.height=s}equals(e){return this.start.x===e.start.x&&this.start.y===e.start.y&&this.width===e.width&&this.height===e.height}}class Gn{polygon;centroids;canvasBox;constructor(e,n=.15){const i={x:e.width*n,y:e.height*n};this.polygon=[D(e.start.x+i.x,e.start.y+i.y,0),D(e.end.x-i.x,e.start.y+i.y,0),D(e.end.x-i.x,e.end.y-i.y,0),D(e.start.x+i.x,e.end.y-i.y,0)],this.centroids=[this.getCenter()],this.canvasBox=e}getCenter(){return D(this.polygon.reduce((e,n)=>e+n[0],0)/this.polygon.length,this.polygon.reduce((e,n)=>e+n[1],0)/this.polygon.length,0)}resize(e){if(this.canvasBox.equals(e))return;const n=e.width===this.canvasBox.width?1:e.width/this.canvasBox.width,i=e.height===this.canvasBox.height?1:e.height/this.canvasBox.height;for(const s of this.polygon)s[0]=(s[0]-this.canvasBox.start.x)*n+e.start.x,s[1]=(s[1]-this.canvasBox.start.y)*i+e.start.y;for(const s of this.centroids)s[0]=(s[0]-this.canvasBox.start.x)*n+e.start.x,s[1]=(s[1]-this.canvasBox.start.y)*i+e.start.y;this.canvasBox=e}}const Zn={clearCanvasIfResized:!0,boids:{lineWidth:.1,size:4},debug:{flightZoneColor:"#00ff00"}};function Xn(){const t=new Path2D,e=1;return t.moveTo(-e*.5,e*.3),t.lineTo(e,0),t.lineTo(-e*.5,-e*.3),t.moveTo(-e*.5,e*.3),t.lineTo(-e*.5,-e*.3),t.moveTo(e,0),t.lineTo(-e*.5,0),t}class Jn{window;canvas;renderingContext;config;screenBox;canvasBox;devicePixelRatio;boidPath=Xn();constructor(e,n,i={}){this.window=e,this.canvas=n;const s=n.getContext("2d");if(!s)throw new Error("Canvas context not available");this.renderingContext=s,this.config={...Zn,...i},this.screenBox=new ht(0,0,this.window.screen.width,this.window.screen.height),this.devicePixelRatio=this.window.devicePixelRatio||1;const r=this.canvas.getBoundingClientRect();this.canvasBox=new ht(this.window.screenX+(this.window.outerWidth-this.window.innerWidth)+r.left,this.window.screenY+(this.window.outerHeight-this.window.innerHeight)+r.top,r.width,r.height),this.scaleCanvas()}checkResize(){this.screenBox=new ht(0,0,this.window.screen.width,this.window.screen.height);const e=this.window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect(),i=new ht(this.window.screenX+(this.window.outerWidth-this.window.innerWidth)+n.left,this.window.screenY+(this.window.outerHeight-this.window.innerHeight)+n.top,n.width,n.height);return this.canvasBox.equals(i)&&this.devicePixelRatio===e?!1:(this.config.clearCanvasIfResized&&this.clearCanvas(),this.devicePixelRatio=e,this.canvasBox=i,this.scaleCanvas(),!0)}scaleCanvas(){const e=this.canvas.clientWidth,n=this.canvas.clientHeight;this.canvas.width=e*this.devicePixelRatio,this.canvas.height=n*this.devicePixelRatio;const i=this.renderingContext;i.setTransform(1,0,0,1,0,0),i.scale(this.devicePixelRatio,this.devicePixelRatio)}clearCanvas(){this.renderingContext.clearRect(0,0,this.canvas.width,this.canvas.height)}drawFlightZone(e){const n=this.canvasBox.start.x,i=this.canvasBox.start.y,s=this.renderingContext;s.save(),s.strokeStyle=this.config.debug.flightZoneColor,s.lineWidth=2,s.beginPath(),s.moveTo(e.polygon[0][0]-n,e.polygon[0][1]-i);for(let r=1;r<e.polygon.length;r++)s.lineTo(e.polygon[r][0]-n,e.polygon[r][1]-i);s.closePath(),s.stroke(),s.fillStyle=this.config.debug.flightZoneColor,s.beginPath();for(const r of e.centroids)s.arc(r[0]-n,r[1]-i,2,0,2*Math.PI);s.fill(),s.closePath(),s.restore()}drawBoid(e,n){const i=e.getPosition(),s=e.getVelocity(),r=this.canvasBox.start.x,o=this.canvasBox.start.y,l=this.renderingContext;l.save(),l.translate(i[0]-r,i[1]-o),l.rotate(Math.atan2(s[1],s[0])),l.scale(this.config.boids.size,this.config.boids.size),l.strokeStyle=`hsl(10, 10%, ${Math.max(10,100-i[2]/n*80)}%)`,l.lineWidth=this.config.boids.lineWidth,l.stroke(this.boidPath),l.restore()}}class Qn{cellSize;grid;prevCellKeys=new Map;constructor(e){this.cellSize=D(e.x,e.y,0),this.grid=new Map}getCellKey(e){return`${Math.floor(e[0]/this.cellSize[0])},${Math.floor(e[1]/this.cellSize[1])}`}update(e){const n=e.getPosition(),i=this.getCellKey(n),s=this.prevCellKeys.get(e);if(s===i)return;if(s){const o=this.grid.get(s);if(o){const l=o.indexOf(e);l!==-1&&(o.length==1?this.grid.delete(s):(o[l]=o[o.length-1],o.pop()))}}const r=this.grid.get(i);r?r.push(e):this.grid.set(i,[e]),this.prevCellKeys.set(e,i)}getNeighbors(e,n,i=10){const s=this.getCellKey(e.getPosition()),r=[];let o=0;const l=this.grid.get(s);if(l){for(const u of l)if(u!==e&&(r.push(u),o++,o>=i))return r}const[a,f]=s.split(",").map(Number);for(let u=1;u<=n;u++)for(const{dx:d,dy:c}of this.diamondSpiralIterator(u)){const h=this.grid.get(`${a+d},${f+c}`);if(!h)continue;if(o+h.length>=i)return r.push(...h.slice(0,i-o)),r;r.push(...h),o+=h.length}return r}*diamondSpiralIterator(e){let n=e,i=0;for(yield{dx:n,dy:i};n>0;)n--,i++,yield{dx:n,dy:i};for(;n>-e;)n--,i--,yield{dx:n,dy:i};for(;n<0;)n++,i--,yield{dx:n,dy:i};for(;n<e;)n++,i++,yield{dx:n,dy:i}}}function ti(t,e,n,i){const s=L(M(),e),r=i*Math.PI/180,o=Hn(L(M(),s),L(M(),n));if(Math.acos(o)<r){Ae(t,n);return}const a=o>=0?1:-1,f=Math.cos(r),u=Math.sin(r)*a;Un(t,s[0]*f-s[1]*u,s[0]*u+s[1]*f,0),dt(t,t,At(n))}function ei(t,e){if(e.length<3)return!1;let n=!1;const i=t[0],s=t[1];for(let r=0,o=e.length-1;r<e.length;o=r++){const l=e[r][0],a=e[r][1],f=e[o][0],u=e[o][1];a<=s==s<u&&i<(f-l)*(s-a)/(u-a)+l&&(n=!n)}return n}const ni={minSpeed:1,maxSpeed:6,maxTurnAngleDeg:120,acceleration:{meetObjective:1.5,gravity:.05}};class ii{displayId;position;velocity;acceleration;config;objective;constructor(e,n,i={}){this.displayId=e,this.config={...i,...ni};const s=Math.random()*2*Math.PI;this.position=n,this.velocity=D(Math.cos(s)*this.config.maxSpeed,Math.sin(s)*this.config.maxSpeed,0),this.acceleration=M()}getPosition(){return Xt(this.position)}getVelocity(){return Xt(this.velocity)}update(e,n,i,s){const r=M();if(!this.objective&&!ei(this.position,i)){let o=M(),l=0;for(const a of s){const f=Vn(M(),a,this.position),u=Math.abs(f[0])+Math.abs(f[1]);u>l&&(l=u,o=f)}o[2]=0,L(o,o),this.objective={direction:o,remainingTicks:30}}if(this.objective)if(this.objective.remainingTicks-=1,this.objective.remainingTicks<=0)this.objective=void 0;else{const o=Ae(M(),this.objective.direction);L(o,o),dt(o,o,this.config.acceleration.meetObjective),Rt(r,r,o)}ti(this.acceleration,this.velocity,r,this.config.maxTurnAngleDeg),this.acceleration[1]+=this.config.acceleration.gravity,this.acceleration[2]=0,Rt(this.velocity,this.velocity,this.acceleration),At(this.velocity)>this.config.maxSpeed?(L(this.velocity,this.velocity),dt(this.velocity,this.velocity,this.config.maxSpeed)):At(this.velocity)<this.config.minSpeed&&(L(this.velocity,this.velocity),dt(this.velocity,this.velocity,this.config.minSpeed)),this.position=Rt(this.position,this.position,this.velocity)}}const ri={grid:{cellSize:{x:20,y:20}}};class si{simBox;maxDepth;config;maxBoidCount=0;boidConfig={};boids=[];spatialGrid;isRunning=!1;nextDisplayId=0;constructor(e,n,i={}){this.simBox=e,this.maxDepth=n,this.config={...ri,...i},this.spatialGrid=new Qn(this.config.grid.cellSize)}resize(e,n){this.simBox=e,n&&(this.maxDepth=n)}start(e,n){this.maxBoidCount=e,this.boidConfig=n;for(let i=0;i<this.maxBoidCount;i++){const s=D(this.simBox.start.x+this.simBox.width*(Math.random()*1.4-.2),this.simBox.start.y+this.simBox.height*(Math.random()*1.4-.2),Math.random()*this.maxDepth),r=new ii(this.nextDisplayId,s,this.boidConfig);this.nextDisplayId++,this.boids.push(r),this.spatialGrid.update(r)}this.isRunning=!0}update(e){if(this.isRunning)for(const n of this.boids){const i=this.spatialGrid.getNeighbors(n,2),s=this.spatialGrid.getNeighbors(n,0);n.update(i,s,e.polygon,e.centroids),this.spatialGrid.update(n)}}stop(){this.isRunning=!1,this.boids=[],this.maxBoidCount=0}}const Jt=500;class oi{renderer;flightZone;simulation;debug=!1;isRunning=!1;animationId=null;resizeTimeoutId=null;constructor(e,n,i={}){this.renderer=new Jn(e,n,i),this.flightZone=new Gn(this.renderer.canvasBox),this.simulation=new si(this.renderer.screenBox,Jt)}start(e,n,i={}){this.debug=n,this.simulation.maxBoidCount=e,this.simulation.boidConfig=i,!this.isRunning&&(this.isRunning=!0,this.simulation.start(e,i),this.animationLoop(),this.resizeLoop())}animationLoop=()=>{this.isRunning&&(this.simulation.update(this.flightZone),this.renderer.clearCanvas(),this.debug&&this.renderer.drawFlightZone(this.flightZone),this.simulation.boids.forEach(e=>{this.renderer.drawBoid(e,Jt)}),this.animationId=requestAnimationFrame(this.animationLoop))};resizeLoop=()=>{if(!this.isRunning)return;this.renderer.checkResize()&&(this.flightZone.resize(this.renderer.canvasBox),this.simulation.resize(this.renderer.screenBox)),this.resizeTimeoutId=setTimeout(this.resizeLoop,10)};stop(){this.resizeTimeoutId&&(cancelAnimationFrame(this.resizeTimeoutId),this.resizeTimeoutId=null),this.resizeTimeoutId&&(clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=null),this.renderer.clearCanvas(),this.simulation.stop(),this.isRunning=!1}}var li=Dn('<main class="svelte-uxr442"><canvas class="svelte-uxr442"></canvas></main>');function ai(t,e){ae(e,!1);let n,i=un(null),s=!1;Wn(()=>{n=new URLSearchParams(window.location.search),n.has("debug")&&(s=!0),I(i)&&new oi(window,I(i)).start(5002,s,{})}),Kn();var r=li(),o=pn(r);qn(o,l=>B(i,l),()=>I(i)),zn(t,r),fe()}Fn(ai,{target:document.getElementById("app")});
