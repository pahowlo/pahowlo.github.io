(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const te=!1;var ee=Array.isArray,Ne=Array.prototype.indexOf,Oe=Array.from,St=Object.defineProperty,st=Object.getOwnPropertyDescriptor,ze=Object.getOwnPropertyDescriptors,Be=Object.prototype,Fe=Array.prototype,ne=Object.getPrototypeOf,qt=Object.isExtensible;function je(t){return t()}function Mt(t){for(var e=0;e<t.length;e++)t[e]()}function qe(){var t,e,n=new Promise((i,s)=>{t=i,e=s});return{promise:n,resolve:t,reject:e}}const T=2,Nt=4,ie=8,Et=16,L=32,$=64,re=128,P=256,gt=512,x=1024,M=2048,K=4096,Z=8192,ft=16384,Ot=32768,Le=65536,Lt=1<<17,Ke=1<<18,se=1<<19,zt=1<<20,kt=1<<21,oe=1<<22,_t=1<<23,G=Symbol("$state"),le=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function We(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ye(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ve(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $e(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ue(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ge(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function He(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ze(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Xe=2,y=Symbol();function ae(t){return t===this.v}function Je(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Qe(t){return!Je(t,this.v)}let ut=!1,tn=!1;function en(){ut=!0}let _=null;function Kt(t){_=t}function fe(t,e=!1,n){_={p:_,c:null,e:null,s:t,x:null,l:ut&&!e?{s:null,u:null,$:[]}:null}}function ue(t){var e=_,n=e.e;if(n!==null){e.e=null;for(var i of n)Ee(i)}return _=e.p,{}}function Tt(){return!ut||_!==null&&_.l===null}const nn=new WeakMap;function rn(t){var e=p;if(e===null)return v.f|=_t,t;if((e.f&Ot)===0){if((e.f&re)===0)throw!e.parent&&t instanceof Error&&he(t),t;e.b.error(t)}else ce(t,e)}function ce(t,e){for(;e!==null;){if((e.f&re)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&he(t),t}function he(t){const e=nn.get(t);e&&(St(t,"message",{value:e.message}),St(t,"stack",{value:e.stack}))}let wt=[];function sn(){var t=wt;wt=[],Mt(t)}function on(t){wt.length===0&&queueMicrotask(sn),wt.push(t)}function ln(t){var e=T|M,n=v!==null&&(v.f&T)!==0?v:null;return p===null||n!==null&&(n.f&P)!==0?e|=P:p.f|=se,{ctx:_,deps:null,effects:null,equals:ae,f:e,fn:t,reactions:null,rv:0,v:y,wv:0,parent:n??p,ac:null}}function de(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)V(e[n])}}function an(t){for(var e=t.parent;e!==null;){if((e.f&T)===0)return e;e=e.parent}return null}function Bt(t){var e,n=p;mt(an(t));try{de(t),e=Ie(t)}finally{mt(n)}return e}function ve(t){var e=Bt(t);if(t.equals(e)||(t.v=e,t.wv=Me()),!nt)if(X!==null)X.set(t,t.v);else{var n=(q||(t.f&P)!==0)&&t.deps!==null?K:x;S(t,n)}}const it=new Set;let w=null,X=null,Wt=new Set,yt=[];function pe(){const t=yt.shift();yt.length>0&&queueMicrotask(pe),t()}let lt=[],Ft=null,It=!1;class J{current=new Map;#r=new Map;#s=new Set;#t=0;#f=null;#u=!1;#n=[];#o=[];#i=[];#e=[];#l=[];#c=[];#h=[];skipped_effects=new Set;process(e){lt=[];var n=null;if(it.size>1){n=new Map,X=new Map;for(const[r,o]of this.current)n.set(r,{v:r.v,wv:r.wv}),r.v=o;for(const r of it)if(r!==this)for(const[o,l]of r.#r)n.has(o)||(n.set(o,{v:o.v,wv:o.wv}),o.v=l)}for(const r of e)this.#v(r);if(this.#n.length===0&&this.#t===0){this.#d();var i=this.#i,s=this.#e;this.#i=[],this.#e=[],this.#l=[],w=null,Yt(i),Yt(s),w===null?w=this:it.delete(this),this.#f?.resolve()}else this.#a(this.#i),this.#a(this.#e),this.#a(this.#l);if(n){for(const[r,{v:o,wv:l}]of n)r.wv<=l&&(r.v=o);X=null}for(const r of this.#n)ot(r);for(const r of this.#o)ot(r);this.#n=[],this.#o=[]}#v(e){e.f^=x;for(var n=e.first;n!==null;){var i=n.f,s=(i&(L|$))!==0,r=s&&(i&x)!==0,o=r||(i&Z)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){if(s)n.f^=x;else if((i&x)===0)if((i&Nt)!==0)this.#e.push(n);else if((i&oe)!==0){var l=n.b?.pending?this.#o:this.#n;l.push(n)}else Rt(n)&&((n.f&Et)!==0&&this.#l.push(n),ot(n));var a=n.first;if(a!==null){n=a;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}}#a(e){for(const n of e)((n.f&M)!==0?this.#c:this.#h).push(n),S(n,x);e.length=0}capture(e,n){this.#r.has(e)||this.#r.set(e,n),this.current.set(e,e.v)}activate(){w=this}deactivate(){w=null;for(const e of Wt)if(Wt.delete(e),e(),w!==null)break}neuter(){this.#u=!0}flush(){lt.length>0?fn():this.#d(),w===this&&(this.#t===0&&it.delete(this),this.deactivate())}#d(){if(!this.#u)for(const e of this.#s)e();this.#s.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const e of this.#c)S(e,M),Q(e);for(const e of this.#h)S(e,K),Q(e);this.#i=[],this.#e=[],this.flush()}else this.deactivate()}add_callback(e){this.#s.add(e)}settled(){return(this.#f??=qe()).promise}static ensure(){if(w===null){const e=w=new J;it.add(w),J.enqueue(()=>{w===e&&e.flush()})}return w}static enqueue(e){yt.length===0&&queueMicrotask(pe),yt.unshift(e)}}function fn(){var t=H;It=!0;try{var e=0;for($t(!0);lt.length>0;){var n=J.ensure();if(e++>1e3){var i,s;un()}n.process(lt),W.clear()}}finally{It=!1,$t(t),Ft=null}}function un(){try{Ue()}catch(t){ce(t,Ft)}}function Yt(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var i=t[n++];if((i.f&(ft|Z))===0&&Rt(i)){var s=w?w.current.size:0;if(ot(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?Ce(i):i.fn=null),w!==null&&w.current.size>s&&(i.f&zt)!==0)break}}for(;n<e;)Q(t[n++])}}function Q(t){for(var e=Ft=t;e.parent!==null;){e=e.parent;var n=e.f;if(It&&e===p&&(n&Et)!==0)return;if((n&($|L))!==0){if((n&x)===0)return;e.f^=x}}lt.push(e)}const W=new Map;function ge(t,e){var n={f:0,v:t,reactions:null,equals:ae,rv:0,wv:0};return n}function z(t,e){const n=ge(t);return Pn(n),n}function cn(t,e=!1,n=!0){const i=ge(t);return e||(i.equals=Qe),ut&&n&&_!==null&&_.l!==null&&(_.l.s??=[]).push(i),i}function F(t,e,n=!1){v!==null&&(!k||(v.f&Lt)!==0)&&Tt()&&(v.f&(T|Et|oe|Lt))!==0&&!N?.includes(t)&&Ze();let i=n?rt(e):e;return hn(t,i)}function hn(t,e){if(!t.equals(e)){var n=t.v;nt?W.set(t,e):W.set(t,n),t.v=e;var i=J.ensure();i.capture(t,n),(t.f&T)!==0&&((t.f&M)!==0&&Bt(t),S(t,(t.f&P)===0?x:K)),t.wv=Me(),_e(t,M),Tt()&&p!==null&&(p.f&x)!==0&&(p.f&(L|$))===0&&(C===null?Sn([t]):C.push(t))}return e}function Ct(t){F(t,t.v+1)}function _e(t,e){var n=t.reactions;if(n!==null)for(var i=Tt(),s=n.length,r=0;r<s;r++){var o=n[r],l=o.f;if(!(!i&&o===p)){var a=(l&M)===0;a&&S(o,e),(l&T)!==0?_e(o,K):a&&Q(o)}}}function rt(t){if(typeof t!="object"||t===null||G in t)return t;const e=ne(t);if(e!==Be&&e!==Fe)return t;var n=new Map,i=ee(t),s=z(0),r=Y,o=l=>{if(Y===r)return l();var a=v,f=Y;tt(null),Gt(r);var d=l();return tt(a),Gt(f),d};return i&&n.set("length",z(t.length)),new Proxy(t,{defineProperty(l,a,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Ge();var d=n.get(a);return d===void 0?d=o(()=>{var c=z(f.value);return n.set(a,c),c}):F(d,f.value,!0),!0},deleteProperty(l,a){var f=n.get(a);if(f===void 0){if(a in l){const d=o(()=>z(y));n.set(a,d),Ct(s)}}else F(f,y),Ct(s);return!0},get(l,a,f){if(a===G)return t;var d=n.get(a),c=a in l;if(d===void 0&&(!c||st(l,a)?.writable)&&(d=o(()=>{var h=rt(c?l[a]:y),g=z(h);return g}),n.set(a,d)),d!==void 0){var u=D(d);return u===y?void 0:u}return Reflect.get(l,a,f)},getOwnPropertyDescriptor(l,a){var f=Reflect.getOwnPropertyDescriptor(l,a);if(f&&"value"in f){var d=n.get(a);d&&(f.value=D(d))}else if(f===void 0){var c=n.get(a),u=c?.v;if(c!==void 0&&u!==y)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return f},has(l,a){if(a===G)return!0;var f=n.get(a),d=f!==void 0&&f.v!==y||Reflect.has(l,a);if(f!==void 0||p!==null&&(!d||st(l,a)?.writable)){f===void 0&&(f=o(()=>{var u=d?rt(l[a]):y,h=z(u);return h}),n.set(a,f));var c=D(f);if(c===y)return!1}return d},set(l,a,f,d){var c=n.get(a),u=a in l;if(i&&a==="length")for(var h=f;h<c.v;h+=1){var g=n.get(h+"");g!==void 0?F(g,y):h in l&&(g=o(()=>z(y)),n.set(h+"",g))}if(c===void 0)(!u||st(l,a)?.writable)&&(c=o(()=>z(void 0)),F(c,rt(f)),n.set(a,c));else{u=c.v!==y;var R=o(()=>rt(f));F(c,R)}var ct=Reflect.getOwnPropertyDescriptor(l,a);if(ct?.set&&ct.set.call(d,f),!u){if(i&&typeof a=="string"){var ht=n.get("length"),O=Number(a);Number.isInteger(O)&&O>=ht.v&&F(ht,O+1)}Ct(s)}return!0},ownKeys(l){D(s);var a=Reflect.ownKeys(l).filter(c=>{var u=n.get(c);return u===void 0||u.v!==y});for(var[f,d]of n)d.v!==y&&!(f in l)&&a.push(f);return a},setPrototypeOf(){He()}})}var Vt,we,ye,me;function dn(){if(Vt===void 0){Vt=window,we=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;ye=st(e,"firstChild").get,me=st(e,"nextSibling").get,qt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),qt(n)&&(n.__t=void 0)}}function vn(t=""){return document.createTextNode(t)}function xe(t){return ye.call(t)}function pn(t){return me.call(t)}function gn(t,e){return xe(t)}function be(t){p===null&&v===null&&$e(),v!==null&&(v.f&P)!==0&&p===null&&Ve(),nt&&Ye()}function _n(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function et(t,e,n,i=!0){var s=p;s!==null&&(s.f&Z)!==0&&(t|=Z);var r={ctx:_,deps:null,nodes_start:null,nodes_end:null,f:t|M,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ot(r),r.f|=Ot}catch(a){throw V(r),a}else e!==null&&Q(r);var o=n&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&se)===0;if(!o&&i&&(s!==null&&_n(r,s),v!==null&&(v.f&T)!==0&&(t&$)===0)){var l=v;(l.effects??=[]).push(r)}return r}function At(t){be();var e=p.f,n=!v&&(e&L)!==0&&(e&Ot)===0;if(n){var i=_;(i.e??=[]).push(t)}else return Ee(t)}function Ee(t){return et(Nt|zt,t,!1)}function wn(t){return be(),et(ie|zt,t,!0)}function yn(t){J.ensure();const e=et($,t,!0);return(n={})=>new Promise(i=>{n.outro?Rn(e,()=>{V(e),i(void 0)}):(V(e),i(void 0))})}function mn(t){return et(Nt,t,!1)}function xn(t,e=0){return et(ie|e,t,!0)}function bn(t,e=!0){return et(L,t,!0,e)}function Te(t){var e=t.teardown;if(e!==null){const n=nt,i=v;Ut(!0),tt(null);try{e.call(null)}finally{Ut(n),tt(i)}}}function Re(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){n.ac?.abort(le);var i=n.next;(n.f&$)!==0?n.parent=null:V(n,e),n=i}}function En(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&L)===0&&V(e),e=n}}function V(t,e=!0){var n=!1;(e||(t.f&Ke)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Tn(t.nodes_start,t.nodes_end),n=!0),Re(t,e&&!n),xt(t,0),S(t,ft);var i=t.transitions;if(i!==null)for(const r of i)r.stop();Te(t);var s=t.parent;s!==null&&s.first!==null&&Ce(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Tn(t,e){for(;t!==null;){var n=t===e?null:pn(t);t.remove(),t=n}}function Ce(t){var e=t.parent,n=t.prev,i=t.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=n))}function Rn(t,e){var n=[];Pe(t,n,!0),Cn(n,()=>{V(t),e&&e()})}function Cn(t,e){var n=t.length;if(n>0){var i=()=>--n||e();for(var s of t)s.out(i)}else e()}function Pe(t,e,n){if((t.f&Z)===0){if(t.f^=Z,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var i=t.first;i!==null;){var s=i.next,r=(i.f&Le)!==0||(i.f&L)!==0;Pe(i,e,r?n:!1),i=s}}}let H=!1;function $t(t){H=t}let nt=!1;function Ut(t){nt=t}let v=null,k=!1;function tt(t){v=t}let p=null;function mt(t){p=t}let N=null;function Pn(t){v!==null&&(N===null?N=[t]:N.push(t))}let m=null,b=0,C=null;function Sn(t){C=t}let Se=1,at=0,Y=at;function Gt(t){Y=t}let q=!1;function Me(){return++Se}function Rt(t){var e=t.f;if((e&M)!==0)return!0;if((e&K)!==0){var n=t.deps,i=(e&P)!==0;if(n!==null){var s,r,o=(e&gt)!==0,l=i&&p!==null&&!q,a=n.length;if((o||l)&&(p===null||(p.f&ft)===0)){var f=t,d=f.parent;for(s=0;s<a;s++)r=n[s],(o||!r?.reactions?.includes(f))&&(r.reactions??=[]).push(f);o&&(f.f^=gt),l&&d!==null&&(d.f&P)===0&&(f.f^=P)}for(s=0;s<a;s++)if(r=n[s],Rt(r)&&ve(r),r.wv>t.wv)return!0}(!i||p!==null&&!q)&&S(t,x)}return!1}function ke(t,e,n=!0){var i=t.reactions;if(i!==null&&!N?.includes(t))for(var s=0;s<i.length;s++){var r=i[s];(r.f&T)!==0?ke(r,e,!1):e===r&&(n?S(r,M):(r.f&x)!==0&&S(r,K),Q(r))}}function Ie(t){var e=m,n=b,i=C,s=v,r=q,o=N,l=_,a=k,f=Y,d=t.f;m=null,b=0,C=null,q=(d&P)!==0&&(k||!H||v===null),v=(d&(L|$))===0?t:null,N=null,Kt(t.ctx),k=!1,Y=++at,t.ac!==null&&(t.ac.abort(le),t.ac=null);try{t.f|=kt;var c=(0,t.fn)(),u=t.deps;if(m!==null){var h;if(xt(t,b),u!==null&&b>0)for(u.length=b+m.length,h=0;h<m.length;h++)u[b+h]=m[h];else t.deps=u=m;if(!q||(d&T)!==0&&t.reactions!==null)for(h=b;h<u.length;h++)(u[h].reactions??=[]).push(t)}else u!==null&&b<u.length&&(xt(t,b),u.length=b);if(Tt()&&C!==null&&!k&&u!==null&&(t.f&(T|K|M))===0)for(h=0;h<C.length;h++)ke(C[h],t);return s!==null&&s!==t&&(at++,C!==null&&(i===null?i=C:i.push(...C))),(t.f&_t)!==0&&(t.f^=_t),c}catch(g){return rn(g)}finally{t.f^=kt,m=e,b=n,C=i,v=s,q=r,N=o,Kt(l),k=a,Y=f}}function Mn(t,e){let n=e.reactions;if(n!==null){var i=Ne.call(n,t);if(i!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[i]=n[s],n.pop())}}n===null&&(e.f&T)!==0&&(m===null||!m.includes(e))&&(S(e,K),(e.f&(P|gt))===0&&(e.f^=gt),de(e),xt(e,0))}function xt(t,e){var n=t.deps;if(n!==null)for(var i=e;i<n.length;i++)Mn(t,n[i])}function ot(t){var e=t.f;if((e&ft)===0){S(t,x);var n=p,i=H;p=t,H=!0;try{(e&Et)!==0?En(t):Re(t),Te(t);var s=Ie(t);t.teardown=typeof s=="function"?s:null,t.wv=Se;var r;te&&tn&&(t.f&M)!==0&&t.deps}finally{H=i,p=n}}}function D(t){var e=t.f,n=(e&T)!==0;if(v!==null&&!k){var i=p!==null&&(p.f&ft)!==0;if(!i&&!N?.includes(t)){var s=v.deps;if((v.f&kt)!==0)t.rv<at&&(t.rv=at,m===null&&s!==null&&s[b]===t?b++:m===null?m=[t]:(!q||!m.includes(t))&&m.push(t));else{(v.deps??=[]).push(t);var r=t.reactions;r===null?t.reactions=[v]:r.includes(v)||r.push(v)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,l=o.parent;l!==null&&(l.f&P)===0&&(o.f^=P)}if(nt){if(W.has(t))return W.get(t);if(n){o=t;var a=o.v;return((o.f&x)===0&&o.reactions!==null||Ae(o))&&(a=Bt(o)),W.set(o,a),a}}else if(n){if(o=t,X?.has(o))return X.get(o);Rt(o)&&ve(o)}if((t.f&_t)!==0)throw t.v;return t.v}function Ae(t){if(t.v===y)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(W.has(e)||(e.f&T)!==0&&Ae(e))return!0;return!1}function jt(t){var e=k;try{return k=!0,t()}finally{k=e}}const kn=-7169;function S(t,e){t.f=t.f&kn|e}function In(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(G in t)Dt(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&G in n&&Dt(n)}}}function Dt(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{Dt(t[i],e)}catch{}const n=ne(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=ze(n);for(let s in i){const r=i[s].get;if(r)try{r.call(t)}catch{}}}}}const An=["touchstart","touchmove"];function Dn(t){return An.includes(t)}const Nn=new Set,Ht=new Set;function dt(t){var e=this,n=e.ownerDocument,i=t.type,s=t.composedPath?.()||[],r=s[0]||t.target,o=0,l=t.__root;if(l){var a=s.indexOf(l);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var f=s.indexOf(e);if(f===-1)return;a<=f&&(o=a)}if(r=s[o]||t.target,r!==e){St(t,"currentTarget",{configurable:!0,get(){return r||n}});var d=v,c=p;tt(null),mt(null);try{for(var u,h=[];r!==null;){var g=r.assignedSlot||r.parentNode||r.host||null;try{var R=r["__"+i];if(R!=null&&(!r.disabled||t.target===r))if(ee(R)){var[ct,...ht]=R;ct.apply(r,[t,...ht])}else R.call(r,t)}catch(O){u?h.push(O):u=O}if(t.cancelBubble||g===e||g===null)break;r=g}if(u){for(let O of h)queueMicrotask(()=>{throw O});throw u}}finally{t.__root=e,delete t.currentTarget,tt(d),mt(c)}}}function On(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function zn(t,e){var n=p;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Bn(t,e){var n=(e&Xe)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=On(s?t:"<!>"+t),i=xe(i));var r=n||we?document.importNode(i,!0):i.cloneNode(!0);return zn(r,r),r}}function Fn(t,e){t!==null&&t.before(e)}function jn(t,e){return qn(t,e)}const U=new Map;function qn(t,{target:e,anchor:n,props:i={},events:s,context:r,intro:o=!0}){dn();var l=new Set,a=c=>{for(var u=0;u<c.length;u++){var h=c[u];if(!l.has(h)){l.add(h);var g=Dn(h);e.addEventListener(h,dt,{passive:g});var R=U.get(h);R===void 0?(document.addEventListener(h,dt,{passive:g}),U.set(h,1)):U.set(h,R+1)}}};a(Oe(Nn)),Ht.add(a);var f=void 0,d=yn(()=>{var c=n??e.appendChild(vn());return bn(()=>{if(r){fe({});var u=_;u.c=r}s&&(i.$$events=s),f=t(c,i)||{},r&&ue()}),()=>{for(var u of l){e.removeEventListener(u,dt);var h=U.get(u);--h===0?(document.removeEventListener(u,dt),U.delete(u)):U.set(u,h)}Ht.delete(a),c!==n&&c.parentNode?.removeChild(c)}});return Ln.set(f,d),f}let Ln=new WeakMap;function Zt(t,e){return t===e||t?.[G]===e}function Kn(t={},e,n,i){return mn(()=>{var s,r;return xn(()=>{s=r,r=[],jt(()=>{t!==n(...r)&&(e(t,...r),s&&Zt(n(...s),t)&&e(null,...s))})}),()=>{on(()=>{r&&Zt(n(...r),t)&&e(null,...r)})}}),t}function Wn(t=!1){const e=_,n=e.l.u;if(!n)return;let i=()=>In(e.s);if(t){let s=0,r={};const o=ln(()=>{let l=!1;const a=e.s;for(const f in a)a[f]!==r[f]&&(r[f]=a[f],l=!0);return l&&s++,s});i=()=>D(o)}n.b.length&&wn(()=>{Xt(e,i),Mt(n.b)}),At(()=>{const s=jt(()=>n.m.map(je));return()=>{for(const r of s)typeof r=="function"&&r()}}),n.a.length&&At(()=>{Xt(e,i),Mt(n.a)})}function Xt(t,e){if(t.l.s)for(const n of t.l.s)D(n);e()}function Yn(t){_===null&&We(),ut&&_.l!==null?Vn(_).m.push(t):At(()=>{const e=jt(t);if(typeof e=="function")return e})}function Vn(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const $n="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add($n);en();var bt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function E(){var t=new bt(3);return bt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Jt(t){var e=new bt(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function pt(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function j(t,e,n){var i=new bt(3);return i[0]=t,i[1]=e,i[2]=n,i}function De(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Un(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function I(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Pt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function B(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function A(t,e){var n=e[0],i=e[1],s=e[2],r=n*n+i*i+s*s;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Gn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hn(t,e){var n=t[0],i=t[1],s=t[2],r=e[0],o=e[1],l=e[2],a=Math.sqrt(n*n+i*i+s*s),f=Math.sqrt(r*r+o*o+l*l),d=a*f,c=d&&Gn(t,e)/d;return Math.acos(Math.min(Math.max(c,-1),1))}(function(){var t=E();return function(e,n,i,s,r,o){var l,a;for(n||(n=3),i||(i=0),s?a=Math.min(s*n+i,e.length):a=e.length,l=i;l<a;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],r(t,t,o),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();class vt{start;end;width;height;constructor(e,n,i,s){this.start={x:e,y:n},this.end={x:e+i,y:n+s},this.width=i,this.height=s}equals(e){return this.start.x===e.start.x&&this.start.y===e.start.y&&this.width===e.width&&this.height===e.height}}class Zn{polygon;centroids;canvasBox;constructor(e,n=.15){const i=Math.min(e.width*n,e.height*n);this.polygon=[j(e.start.x+i,e.start.y+i,0),j(e.end.x-i,e.start.y+i,0),j(e.end.x-i,e.end.y-i,0),j(e.start.x+i,e.end.y-i,0)],this.centroids=[this.getCenter()],this.canvasBox=e}getCenter(){return j(this.polygon.reduce((e,n)=>e+n[0],0)/this.polygon.length,this.polygon.reduce((e,n)=>e+n[1],0)/this.polygon.length,0)}resize(e){if(this.canvasBox.equals(e))return;const n=e.width===this.canvasBox.width?1:e.width/this.canvasBox.width,i=e.height===this.canvasBox.height?1:e.height/this.canvasBox.height;for(const s of this.polygon)s[0]=(s[0]-this.canvasBox.start.x)*n+e.start.x,s[1]=(s[1]-this.canvasBox.start.y)*i+e.start.y;for(const s of this.centroids)s[0]=(s[0]-this.canvasBox.start.x)*n+e.start.x,s[1]=(s[1]-this.canvasBox.start.y)*i+e.start.y;this.canvasBox=e}}const Xn={clearCanvasIfResized:!0,boids:{lineWidth:.1,size:4},debug:{flightZoneColor:"#00ff00"}};function Jn(){const t=new Path2D,e=1;return t.moveTo(-e*.5,e*.3),t.lineTo(e,0),t.lineTo(-e*.5,-e*.3),t.moveTo(-e*.5,e*.3),t.lineTo(-e*.5,-e*.3),t.moveTo(e,0),t.lineTo(-e*.5,0),t}class Qn{window;canvas;renderingContext;config;screenBox;canvasBox;devicePixelRatio;boidPath=Jn();constructor(e,n,i={}){this.window=e,this.canvas=n;const s=n.getContext("2d");if(!s)throw new Error("Canvas context not available");this.renderingContext=s,this.config={...Xn,...i},this.screenBox=new vt(0,0,this.window.screen.width,this.window.screen.height),this.devicePixelRatio=this.window.devicePixelRatio||1;const r=this.canvas.getBoundingClientRect();this.canvasBox=new vt(this.window.screenX+(this.window.outerWidth-this.window.innerWidth)+r.left,this.window.screenY+(this.window.outerHeight-this.window.innerHeight)+r.top,r.width,r.height),this.scaleCanvas()}checkResize(){this.screenBox=new vt(0,0,this.window.screen.width,this.window.screen.height);const e=this.window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect(),i=new vt(this.window.screenX+(this.window.outerWidth-this.window.innerWidth)+n.left,this.window.screenY+(this.window.outerHeight-this.window.innerHeight)+n.top,n.width,n.height);return this.canvasBox.equals(i)&&this.devicePixelRatio===e?!1:(this.config.clearCanvasIfResized&&this.clearCanvas(),this.devicePixelRatio=e,this.canvasBox=i,this.scaleCanvas(),!0)}scaleCanvas(){const e=this.renderingContext,n=this.canvas.clientWidth,i=this.canvas.clientHeight;this.canvas.width=n*this.devicePixelRatio,this.canvas.height=i*this.devicePixelRatio,e.scale(this.devicePixelRatio,this.devicePixelRatio)}clearCanvas(){const e=this.renderingContext;e.canvas.width=e.canvas.width,e.scale(this.devicePixelRatio,this.devicePixelRatio)}drawFlightZone(e){const n=this.canvasBox.start.x,i=this.canvasBox.start.y,s=this.renderingContext;s.save(),s.strokeStyle=this.config.debug.flightZoneColor,s.lineWidth=2,s.beginPath(),s.moveTo(e.polygon[0][0]-n,e.polygon[0][1]-i);for(let r=1;r<e.polygon.length;r++)s.lineTo(e.polygon[r][0]-n,e.polygon[r][1]-i);s.closePath(),s.stroke(),s.fillStyle=this.config.debug.flightZoneColor,s.beginPath();for(const r of e.centroids)s.arc(r[0]-n,r[1]-i,2,0,2*Math.PI);s.fill(),s.closePath(),s.restore()}drawBoid(e,n){const i=e.getPosition(),s=e.getVelocity(),r=this.canvasBox.start.x,o=this.canvasBox.start.y,l=this.renderingContext;l.save(),l.translate(i[0]-r,i[1]-o),l.rotate(Math.atan2(s[1],s[0])),l.scale(this.config.boids.size,this.config.boids.size),l.strokeStyle=`hsl(10, 10%, ${Math.max(10,100-i[2]/n*80)}%)`,l.lineWidth=this.config.boids.lineWidth,l.stroke(this.boidPath),l.restore()}}class ti{cellSize;grid;prevCellKeys=new Map;constructor(e){this.cellSize=j(e.x,e.y,0),this.grid=new Map}getCellKey(e){return`${Math.floor(e[0]/this.cellSize[0])},${Math.floor(e[1]/this.cellSize[1])}`}update(e){const n=e.getPosition(),i=this.getCellKey(n),s=this.prevCellKeys.get(e);if(s===i)return;if(s){const o=this.grid.get(s);if(o){const l=o.indexOf(e);l!==-1&&(o.length==1?this.grid.delete(s):(o[l]=o[o.length-1],o.pop()))}}const r=this.grid.get(i);r?r.push(e):this.grid.set(i,[e]),this.prevCellKeys.set(e,i)}getNeighbors(e,n,i=1e3){const s=this.getCellKey(e.getPosition()),r=[];let o=0;const l=this.grid.get(s);if(l){for(const d of l)if(d!==e&&(r.push(d),o++,o>=i))return r}const[a,f]=s.split(",").map(Number);for(let d=1;d<=n;d++)for(const{dx:c,dy:u}of this.diamondSpiralIterator(d)){const h=this.grid.get(`${a+c},${f+u}`);if(!h)continue;if(o+h.length>=i)return r.push(...h.slice(0,i-o)),r;r.push(...h),o+=h.length}return r}*diamondSpiralIterator(e){let n=e,i=0;for(yield{dx:n,dy:i};n>0;)n--,i++,yield{dx:n,dy:i};for(;n>-e;)n--,i--,yield{dx:n,dy:i};for(;n<0;)n++,i--,yield{dx:n,dy:i};for(;n<e;)n++,i++,yield{dx:n,dy:i}}}function ei(t,e,n,i){const s=A(E(),e),r=i*Math.PI/180,o=Hn(s,A(E(),n));if(o<r){De(t,n);return}const l=o>=0?1:-1,a=Math.cos(r),f=Math.sin(r)*l;Un(t,s[0]*a-s[1]*f,s[0]*f+s[1]*a,0),B(t,t,pt(n))}function ni(t,e){if(e.length<3)return!1;let n=!1;const i=t[0],s=t[1];for(let r=0,o=e.length-1;r<e.length;o=r++){const l=e[r][0],a=e[r][1],f=e[o][0],d=e[o][1];a<=s==s<d&&i<(f-l)*(s-a)/(d-a)+l&&(n=!n)}return n}const ii={minSpeed:1,maxSpeed:6,maxTurnAngleDeg:120,acceleration:{meetObjective:1.5,cohesion:.5,alignment:.5,separation:.9,gravity:.05}};class ri{displayId;position;velocity;acceleration;config;objective;constructor(e,n,i={}){this.displayId=e,this.config={...i,...ii};const s=Math.random()*2*Math.PI;this.position=n,this.velocity=j(Math.cos(s)*this.config.maxSpeed,Math.sin(s)*this.config.maxSpeed,0),this.acceleration=E()}getPosition(){return Jt(this.position)}getVelocity(){return Jt(this.velocity)}update(e,n,i,s,r){const o=E();if(!this.objective&&!ni(this.position,s)){let c=E(),u=0;for(const h of r){const g=Pt(E(),h,this.position),R=Math.abs(g[0])+Math.abs(g[1]);R>u&&(u=R,c=g)}c[2]=0,A(c,c),this.objective={direction:c,remainingTicks:30}}if(this.objective&&this.objective.remainingTicks>0){this.objective.remainingTicks-=1;const c=De(E(),this.objective.direction);A(c,c),B(c,c,this.config.acceleration.meetObjective),I(o,o,c)}else this.objective=void 0;const l=E(),a=E();for(const c of e){const u=Pt(E(),c.getPosition(),this.position);u[2]=0,I(a,a,u);const h=c.getVelocity();h[2]=0,I(l,l,h)}A(a,a),B(a,a,this.config.acceleration.cohesion),A(l,l),B(l,l,this.config.acceleration.alignment),I(o,o,a),I(o,o,l);const f=E(),d=Math.max(i[0],i[1],i[2]);for(const c of n){const u=Pt(E(),this.position,c.getPosition());u[2]=0;const h=pt(u);h!==0&&(B(u,u,d/h),I(f,f,u))}A(f,f),B(f,f,this.config.acceleration.separation),I(o,o,f),ei(this.acceleration,this.velocity,o,this.config.maxTurnAngleDeg),this.acceleration[1]+=this.config.acceleration.gravity,this.acceleration[2]=0,I(this.velocity,this.velocity,this.acceleration),pt(this.velocity)>this.config.maxSpeed?(A(this.velocity,this.velocity),B(this.velocity,this.velocity,this.config.maxSpeed)):pt(this.velocity)<this.config.minSpeed&&(A(this.velocity,this.velocity),B(this.velocity,this.velocity,this.config.minSpeed)),this.position=I(this.position,this.position,this.velocity)}}const si={grid:{neighborDistance:2,closeNeighborDistance:0,maxNeighborCount:20,cellSize:{x:10,y:10}}};class oi{simBox;maxDepth;config;maxBoidCount=0;boidConfig={};boids=[];spatialGrid;isRunning=!1;nextDisplayId=0;constructor(e,n,i={}){this.simBox=e,this.maxDepth=n,this.config={...si,...i},this.spatialGrid=new ti(this.config.grid.cellSize)}resize(e,n){this.simBox=e,n&&(this.maxDepth=n)}start(e,n){this.maxBoidCount=e,this.boidConfig=n;for(let i=0;i<this.maxBoidCount;i++){const s=j(this.simBox.start.x+this.simBox.width*(Math.random()*1.4-.2),this.simBox.start.y+this.simBox.height*(Math.random()*1.4-.2),Math.random()*this.maxDepth),r=new ri(this.nextDisplayId,s,this.boidConfig);this.nextDisplayId++,this.boids.push(r),this.spatialGrid.update(r)}this.isRunning=!0}update(e){if(this.isRunning)for(const n of this.boids){const i=this.spatialGrid.getNeighbors(n,this.config.grid.neighborDistance,this.config.grid.maxNeighborCount),s=this.spatialGrid.getNeighbors(n,this.config.grid.closeNeighborDistance,this.config.grid.maxNeighborCount);n.update(i,s,this.spatialGrid.cellSize,e.polygon,e.centroids),this.spatialGrid.update(n)}}stop(){this.isRunning=!1,this.boids=[],this.maxBoidCount=0}}const Qt=500;class li{renderer;flightZone;simulation;debug=!1;isRunning=!1;animationId=null;resizeTimeoutId=null;constructor(e,n,i={}){this.renderer=new Qn(e,n,i),this.flightZone=new Zn(this.renderer.canvasBox),this.simulation=new oi(this.renderer.screenBox,Qt)}start(e,n,i={}){this.debug=n,this.simulation.maxBoidCount=e,this.simulation.boidConfig=i,!this.isRunning&&(this.isRunning=!0,this.simulation.start(e,i),this.animationLoop(),this.resizeLoop())}animationLoop=()=>{this.isRunning&&(this.simulation.update(this.flightZone),this.renderer.clearCanvas(),this.debug&&this.renderer.drawFlightZone(this.flightZone),this.simulation.boids.forEach(e=>{this.renderer.drawBoid(e,Qt)}),this.animationId=requestAnimationFrame(this.animationLoop))};resizeLoop=()=>{if(!this.isRunning)return;this.renderer.checkResize()&&(this.flightZone.resize(this.renderer.canvasBox),this.simulation.resize(this.renderer.screenBox)),this.resizeTimeoutId=setTimeout(this.resizeLoop,10)};stop(){this.resizeTimeoutId&&(cancelAnimationFrame(this.resizeTimeoutId),this.resizeTimeoutId=null),this.resizeTimeoutId&&(clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=null),this.renderer.clearCanvas(),this.simulation.stop(),this.isRunning=!1}}var ai=Bn('<main class="svelte-uxr442"><canvas class="svelte-uxr442"></canvas></main>');function fi(t,e){fe(e,!1);let n,i=cn(null),s=!1;Yn(()=>{n=new URLSearchParams(window.location.search),n.has("debug")&&(s=!0),D(i)&&new li(window,D(i)).start(5002,s,{})}),Wn();var r=ai(),o=gn(r);Kn(o,l=>F(i,l),()=>D(i)),Fn(t,r),ue()}jn(fi,{target:document.getElementById("app")});
